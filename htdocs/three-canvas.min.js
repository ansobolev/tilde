// three.js - http://github.com/mrdoob/three.js
'use strict';var THREE=THREE||{REVISION:"53"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};self.Int32Array=self.Int32Array||Array;self.Float32Array=self.Float32Array||Array;String.prototype.startsWith=String.prototype.startsWith||function(a){return this.slice(0,a.length)===a};String.prototype.endsWith=String.prototype.endsWith||function(a){var a=String(a),b=this.lastIndexOf(a);return(-1<b&&b)===this.length-a.length};
String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];void 0===window.requestAnimationFrame&&(window.requestAnimationFrame=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),g=window.setTimeout(function(){b(c+f)},f);a=c+f;return g});window.cancelAnimationFrame=window.cancelAnimationFrame||
function(a){window.clearTimeout(a)}})();THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;
THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};
THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;
THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){void 0!==a&&this.setHex(a);return this};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);
this.b=Math.sqrt(this.b);return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSV:function(a,b,c){var d,e,f;0===c?this.r=this.g=this.b=0:(d=Math.floor(6*a),e=6*a-d,a=c*(1-b),f=c*(1-b*e),b=c*(1-b*(1-e)),0===d?(this.r=c,this.g=b,this.b=a):1===d?(this.r=f,this.g=c,this.b=a):2===d?(this.r=a,this.g=c,this.b=b):3===d?(this.r=a,this.g=f,this.b=c):4===d?(this.r=b,this.g=a,this.b=c):5===d&&(this.r=c,this.g=a,this.b=f));return this},getHex:function(){return 255*this.r<<16^255*this.g<<
8^255*this.b<<0},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getContextStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},setContextStyle:function(a){a=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/i.exec(a);this.r=parseInt(a[1],10)/255;this.g=parseInt(a[2],10)/255;this.b=parseInt(a[3],10)/255;return this},getHSV:function(a){var b=
this.r,c=this.g,d=this.b,e=Math.max(Math.max(b,c),d),f=Math.min(Math.min(b,c),d);if(f===e)f=b=0;else{var g=e-f,f=g/e,b=(b===e?(c-d)/g:c===e?2+(d-b)/g:4+(b-c)/g)/6;0>b&&(b+=1);1<b&&(b-=1)}void 0===a&&(a={h:0,s:0,v:0});a.h=b;a.s=f;a.v=e;return a},lerpSelf:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addSelf:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},subSelf:function(a){this.x-=a.x;this.y-=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){a?(this.x/=a,this.y/=a):this.set(0,
0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,a=this.y-a.y;return b*b+a*a},setLength:function(a){return this.normalize().multiplyScalar(a)},lerpSelf:function(a,
b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addSelf:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},
sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},subSelf:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},multiply:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},multiplySelf:function(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},divideSelf:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){a?(this.x/=a,this.y/=a,this.z/=a):
this.z=this.y=this.x=0;return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.normalize().multiplyScalar(a)},lerpSelf:function(a,b){this.x+=
(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){this.x=a.y*b.z-a.z*b.y;this.y=a.z*b.x-a.x*b.z;this.z=a.x*b.y-a.y*b.x;return this},crossSelf:function(a){var b=this.x,c=this.y,d=this.z;this.x=c*a.z-d*a.y;this.y=d*a.x-b*a.z;this.z=b*a.y-c*a.x;return this},angleTo:function(a){return Math.acos(this.dot(a)/this.length()/a.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){return(new THREE.Vector3).sub(this,
a).lengthSq()},getPositionFromMatrix:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setEulerFromRotationMatrix:function(a,b){function c(a){return Math.min(Math.max(a,-1),1)}var d=a.elements,e=d[0],f=d[4],g=d[8],i=d[1],h=d[5],j=d[9],l=d[2],m=d[6],d=d[10];void 0===b||"XYZ"===b?(this.y=Math.asin(c(g)),0.99999>Math.abs(g)?(this.x=Math.atan2(-j,d),this.z=Math.atan2(-f,e)):(this.x=Math.atan2(m,h),this.z=0)):"YXZ"===b?(this.x=Math.asin(-c(j)),0.99999>Math.abs(j)?
(this.y=Math.atan2(g,d),this.z=Math.atan2(i,h)):(this.y=Math.atan2(-l,e),this.z=0)):"ZXY"===b?(this.x=Math.asin(c(m)),0.99999>Math.abs(m)?(this.y=Math.atan2(-l,d),this.z=Math.atan2(-f,h)):(this.y=0,this.z=Math.atan2(i,e))):"ZYX"===b?(this.y=Math.asin(-c(l)),0.99999>Math.abs(l)?(this.x=Math.atan2(m,d),this.z=Math.atan2(i,e)):(this.x=0,this.z=Math.atan2(-f,h))):"YZX"===b?(this.z=Math.asin(c(i)),0.99999>Math.abs(i)?(this.x=Math.atan2(-j,h),this.y=Math.atan2(-l,e)):(this.x=0,this.y=Math.atan2(g,d))):
"XZY"===b&&(this.z=Math.asin(-c(f)),0.99999>Math.abs(f)?(this.x=Math.atan2(m,h),this.y=Math.atan2(g,e)):(this.x=Math.atan2(-j,d),this.y=0));return this},setEulerFromQuaternion:function(a,b){function c(a){return Math.min(Math.max(a,-1),1)}var d=a.x*a.x,e=a.y*a.y,f=a.z*a.z,g=a.w*a.w;void 0===b||"XYZ"===b?(this.x=Math.atan2(2*(a.x*a.w-a.y*a.z),g-d-e+f),this.y=Math.asin(c(2*(a.x*a.z+a.y*a.w))),this.z=Math.atan2(2*(a.z*a.w-a.x*a.y),g+d-e-f)):"YXZ"===b?(this.x=Math.asin(c(2*(a.x*a.w-a.y*a.z))),this.y=Math.atan2(2*
(a.x*a.z+a.y*a.w),g-d-e+f),this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),g-d+e-f)):"ZXY"===b?(this.x=Math.asin(c(2*(a.x*a.w+a.y*a.z))),this.y=Math.atan2(2*(a.y*a.w-a.z*a.x),g-d-e+f),this.z=Math.atan2(2*(a.z*a.w-a.x*a.y),g-d+e-f)):"ZYX"===b?(this.x=Math.atan2(2*(a.x*a.w+a.z*a.y),g-d-e+f),this.y=Math.asin(c(2*(a.y*a.w-a.x*a.z))),this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),g+d-e-f)):"YZX"===b?(this.x=Math.atan2(2*(a.x*a.w-a.z*a.y),g-d+e-f),this.y=Math.atan2(2*(a.y*a.w-a.x*a.z),g+d-e-f),this.z=Math.asin(c(2*(a.x*a.y+
a.z*a.w)))):"XZY"===b&&(this.x=Math.atan2(2*(a.x*a.w+a.y*a.z),g-d+e-f),this.y=Math.atan2(2*(a.x*a.z+a.y*a.w),g+d-e-f),this.z=Math.asin(c(2*(a.z*a.w-a.x*a.y))));return this},getScaleFromMatrix:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},
clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addSelf:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},subSelf:function(a){this.x-=
a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},divideScalar:function(a){a?(this.x/=a,this.y/=a,this.z/=a,this.w/=a):(this.z=this.y=this.x=0,this.w=1);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.dot(this)},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.normalize().multiplyScalar(a)},lerpSelf:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):
(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d,a=a.elements,e=a[0];d=a[4];var f=a[8],g=a[1],i=a[5],h=a[9];c=a[2];b=a[6];var j=a[10];if(0.01>Math.abs(d-g)&&0.01>Math.abs(f-c)&&0.01>Math.abs(h-b)){if(0.1>Math.abs(d+g)&&0.1>Math.abs(f+c)&&0.1>Math.abs(h+b)&&0.1>Math.abs(e+i+j-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;i=(i+1)/2;j=(j+1)/2;d=(d+g)/4;f=(f+c)/4;h=(h+b)/4;e>i&&e>j?0.01>e?(b=0,d=c=0.707106781):(b=Math.sqrt(e),c=d/b,d=f/
b):i>j?0.01>i?(b=0.707106781,c=0,d=0.707106781):(c=Math.sqrt(i),b=d/c,d=h/c):0.01>j?(c=b=0.707106781,d=0):(d=Math.sqrt(j),b=f/d,c=h/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-h)*(b-h)+(f-c)*(f-c)+(g-d)*(g-d));0.0010>Math.abs(a)&&(a=1);this.x=(b-h)/a;this.y=(f-c)/a;this.z=(g-d)/a;this.w=Math.acos((e+i+j-1)/2);return this}};THREE.Matrix3=function(){this.elements=new Float32Array(9)};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,multiplyVector3:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z;a.x=b[0]*c+b[3]*d+b[6]*e;a.y=b[1]*c+b[4]*d+b[7]*e;a.z=b[2]*c+b[5]*d+b[8]*e;return a},multiplyVector3Array:function(a){for(var b=THREE.Matrix3.__v1,c=0,d=a.length;c<d;c+=3)b.x=a[c],b.y=a[c+1],b.z=a[c+2],this.multiplyVector3(b),a[c]=b.x,a[c+1]=b.y,a[c+2]=b.z;return a},getInverse:function(a){var b=a.elements,a=b[10]*b[5]-b[6]*b[9],c=-b[10]*b[1]+b[2]*b[9],d=b[6]*b[1]-b[2]*b[5],e=-b[10]*
b[4]+b[6]*b[8],f=b[10]*b[0]-b[2]*b[8],g=-b[6]*b[0]+b[2]*b[4],i=b[9]*b[4]-b[5]*b[8],h=-b[9]*b[0]+b[1]*b[8],j=b[5]*b[0]-b[1]*b[4],b=b[0]*a+b[1]*e+b[2]*i;0===b&&console.warn("Matrix3.getInverse(): determinant == 0");var b=1/b,l=this.elements;l[0]=b*a;l[1]=b*c;l[2]=b*d;l[3]=b*e;l[4]=b*f;l[5]=b*g;l[6]=b*i;l[7]=b*h;l[8]=b*j;return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},transposeIntoArray:function(a){var b=this.m;
a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this}};THREE.Matrix3.__v1=new THREE.Vector3;THREE.Matrix4=function(a,b,c,d,e,f,g,i,h,j,l,m,k,n,p,q){this.elements=new Float32Array(16);this.set(void 0!==a?a:1,b||0,c||0,d||0,e||0,void 0!==f?f:1,g||0,i||0,h||0,j||0,void 0!==l?l:1,m||0,k||0,n||0,p||0,void 0!==q?q:1)};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,g,i,h,j,l,m,k,n,p,q){var o=this.elements;o[0]=a;o[4]=b;o[8]=c;o[12]=d;o[1]=e;o[5]=f;o[9]=g;o[13]=i;o[2]=h;o[6]=j;o[10]=l;o[14]=m;o[3]=k;o[7]=n;o[11]=p;o[15]=q;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]);return this},lookAt:function(a,b,c){var d=this.elements,
e=THREE.Matrix4.__v1,f=THREE.Matrix4.__v2,g=THREE.Matrix4.__v3;g.sub(a,b).normalize();0===g.length()&&(g.z=1);e.cross(c,g).normalize();0===e.length()&&(g.x+=1E-4,e.cross(c,g).normalize());f.cross(g,e);d[0]=e.x;d[4]=f.x;d[8]=g.x;d[1]=e.y;d[5]=f.y;d[9]=g.y;d[2]=e.z;d[6]=f.z;d[10]=g.z;return this},multiply:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],i=c[8],h=c[12],j=c[1],l=c[5],m=c[9],k=c[13],n=c[2],p=c[6],q=c[10],o=c[14],r=c[3],Q=c[7],v=c[11],c=c[15],s=d[0],C=d[4],J=d[8],
t=d[12],B=d[1],x=d[5],z=d[9],D=d[13],W=d[2],u=d[6],R=d[10],G=d[14],I=d[3],K=d[7],S=d[11],d=d[15];e[0]=f*s+g*B+i*W+h*I;e[4]=f*C+g*x+i*u+h*K;e[8]=f*J+g*z+i*R+h*S;e[12]=f*t+g*D+i*G+h*d;e[1]=j*s+l*B+m*W+k*I;e[5]=j*C+l*x+m*u+k*K;e[9]=j*J+l*z+m*R+k*S;e[13]=j*t+l*D+m*G+k*d;e[2]=n*s+p*B+q*W+o*I;e[6]=n*C+p*x+q*u+o*K;e[10]=n*J+p*z+q*R+o*S;e[14]=n*t+p*D+q*G+o*d;e[3]=r*s+Q*B+v*W+c*I;e[7]=r*C+Q*x+v*u+c*K;e[11]=r*J+Q*z+v*R+c*S;e[15]=r*t+Q*D+v*G+c*d;return this},multiplySelf:function(a){return this.multiply(this,
a)},multiplyToArray:function(a,b,c){var d=this.elements;this.multiply(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){var b=this.elements,
c=a.x,d=a.y,e=a.z,f=1/(b[3]*c+b[7]*d+b[11]*e+b[15]);a.x=(b[0]*c+b[4]*d+b[8]*e+b[12])*f;a.y=(b[1]*c+b[5]*d+b[9]*e+b[13])*f;a.z=(b[2]*c+b[6]*d+b[10]*e+b[14])*f;return a},multiplyVector4:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w;a.x=b[0]*c+b[4]*d+b[8]*e+b[12]*f;a.y=b[1]*c+b[5]*d+b[9]*e+b[13]*f;a.z=b[2]*c+b[6]*d+b[10]*e+b[14]*f;a.w=b[3]*c+b[7]*d+b[11]*e+b[15]*f;return a},multiplyVector3Array:function(a){for(var b=THREE.Matrix4.__v1,c=0,d=a.length;c<d;c+=3)b.x=a[c],b.y=a[c+1],b.z=a[c+2],
this.multiplyVector3(b),a[c]=b.x,a[c+1]=b.y,a[c+2]=b.z;return a},rotateAxis:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z;a.x=c*b[0]+d*b[4]+e*b[8];a.y=c*b[1]+d*b[5]+e*b[9];a.z=c*b[2]+d*b[6]+e*b[10];a.normalize();return a},crossVector:function(a){var b=this.elements,c=new THREE.Vector4;c.x=b[0]*a.x+b[4]*a.y+b[8]*a.z+b[12]*a.w;c.y=b[1]*a.x+b[5]*a.y+b[9]*a.z+b[13]*a.w;c.z=b[2]*a.x+b[6]*a.y+b[10]*a.z+b[14]*a.w;c.w=a.w?b[3]*a.x+b[7]*a.y+b[11]*a.z+b[15]*a.w:1;return c},determinant:function(){var a=
this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],i=a[9],h=a[13],j=a[2],l=a[6],m=a[10],k=a[14],n=a[3],p=a[7],q=a[11],a=a[15];return e*i*l*n-d*h*l*n-e*g*m*n+c*h*m*n+d*g*k*n-c*i*k*n-e*i*j*p+d*h*j*p+e*f*m*p-b*h*m*p-d*f*k*p+b*i*k*p+e*g*j*q-c*h*j*q-e*f*l*q+b*h*l*q+c*f*k*q-b*g*k*q-d*g*j*a+c*i*j*a+d*f*l*a-b*i*l*a-c*f*m*a+b*g*m*a},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=
a[11];a[11]=a[14];a[14]=b;return this},flattenToArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+
14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=this.elements;return THREE.Matrix4.__v1.set(a[12],a[13],a[14])},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getColumnX:function(){var a=this.elements;return THREE.Matrix4.__v1.set(a[0],a[1],a[2])},getColumnY:function(){var a=this.elements;return THREE.Matrix4.__v1.set(a[4],a[5],a[6])},getColumnZ:function(){var a=this.elements;return THREE.Matrix4.__v1.set(a[8],a[9],a[10])},getInverse:function(a){var b=
this.elements,c=a.elements,d=c[0],e=c[4],f=c[8],g=c[12],i=c[1],h=c[5],j=c[9],l=c[13],m=c[2],k=c[6],n=c[10],p=c[14],q=c[3],o=c[7],r=c[11],c=c[15];b[0]=j*p*o-l*n*o+l*k*r-h*p*r-j*k*c+h*n*c;b[4]=g*n*o-f*p*o-g*k*r+e*p*r+f*k*c-e*n*c;b[8]=f*l*o-g*j*o+g*h*r-e*l*r-f*h*c+e*j*c;b[12]=g*j*k-f*l*k-g*h*n+e*l*n+f*h*p-e*j*p;b[1]=l*n*q-j*p*q-l*m*r+i*p*r+j*m*c-i*n*c;b[5]=f*p*q-g*n*q+g*m*r-d*p*r-f*m*c+d*n*c;b[9]=g*j*q-f*l*q-g*i*r+d*l*r+f*i*c-d*j*c;b[13]=f*l*m-g*j*m+g*i*n-d*l*n-f*i*p+d*j*p;b[2]=h*p*q-l*k*q+l*m*o-i*p*
o-h*m*c+i*k*c;b[6]=g*k*q-e*p*q-g*m*o+d*p*o+e*m*c-d*k*c;b[10]=e*l*q-g*h*q+g*i*o-d*l*o-e*i*c+d*h*c;b[14]=g*h*m-e*l*m-g*i*k+d*l*k+e*i*p-d*h*p;b[3]=j*k*q-h*n*q-j*m*o+i*n*o+h*m*r-i*k*r;b[7]=e*n*q-f*k*q+f*m*o-d*n*o-e*m*r+d*k*r;b[11]=f*h*q-e*j*q-f*i*o+d*j*o+e*i*r-d*h*r;b[15]=e*j*m-f*h*m+f*i*k-d*j*k-e*i*n+d*h*n;this.multiplyScalar(1/a.determinant());return this},setRotationFromEuler:function(a,b){var c=this.elements,d=a.x,e=a.y,f=a.z,g=Math.cos(d),d=Math.sin(d),i=Math.cos(e),e=Math.sin(e),h=Math.cos(f),f=
Math.sin(f);if(void 0===b||"XYZ"===b){var j=g*h,l=g*f,m=d*h,k=d*f;c[0]=i*h;c[4]=-i*f;c[8]=e;c[1]=l+m*e;c[5]=j-k*e;c[9]=-d*i;c[2]=k-j*e;c[6]=m+l*e;c[10]=g*i}else"YXZ"===b?(j=i*h,l=i*f,m=e*h,k=e*f,c[0]=j+k*d,c[4]=m*d-l,c[8]=g*e,c[1]=g*f,c[5]=g*h,c[9]=-d,c[2]=l*d-m,c[6]=k+j*d,c[10]=g*i):"ZXY"===b?(j=i*h,l=i*f,m=e*h,k=e*f,c[0]=j-k*d,c[4]=-g*f,c[8]=m+l*d,c[1]=l+m*d,c[5]=g*h,c[9]=k-j*d,c[2]=-g*e,c[6]=d,c[10]=g*i):"ZYX"===b?(j=g*h,l=g*f,m=d*h,k=d*f,c[0]=i*h,c[4]=m*e-l,c[8]=j*e+k,c[1]=i*f,c[5]=k*e+j,c[9]=
l*e-m,c[2]=-e,c[6]=d*i,c[10]=g*i):"YZX"===b?(j=g*i,l=g*e,m=d*i,k=d*e,c[0]=i*h,c[4]=k-j*f,c[8]=m*f+l,c[1]=f,c[5]=g*h,c[9]=-d*h,c[2]=-e*h,c[6]=l*f+m,c[10]=j-k*f):"XZY"===b&&(j=g*i,l=g*e,m=d*i,k=d*e,c[0]=i*h,c[4]=-f,c[8]=e*h,c[1]=j*f+k,c[5]=g*h,c[9]=l*f-m,c[2]=m*f-l,c[6]=d*h,c[10]=k*f+j);return this},setRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,i=d+d,h=e+e,a=c*g,j=c*i,c=c*h,l=d*i,d=d*h,e=e*h,g=f*g,i=f*i,f=f*h;b[0]=1-(l+e);b[4]=j-f;b[8]=c+i;b[1]=j+f;b[5]=1-(a+
e);b[9]=d-g;b[2]=c-i;b[6]=d+g;b[10]=1-(a+l);return this},compose:function(a,b,c){var d=this.elements,e=THREE.Matrix4.__m1,f=THREE.Matrix4.__m2;e.identity();e.setRotationFromQuaternion(b);f.makeScale(c.x,c.y,c.z);this.multiply(e,f);d[12]=a.x;d[13]=a.y;d[14]=a.z;return this},decompose:function(a,b,c){var d=this.elements,e=THREE.Matrix4.__v1,f=THREE.Matrix4.__v2,g=THREE.Matrix4.__v3;e.set(d[0],d[1],d[2]);f.set(d[4],d[5],d[6]);g.set(d[8],d[9],d[10]);a=a instanceof THREE.Vector3?a:new THREE.Vector3;b=
b instanceof THREE.Quaternion?b:new THREE.Quaternion;c=c instanceof THREE.Vector3?c:new THREE.Vector3;c.x=e.length();c.y=f.length();c.z=g.length();a.x=d[12];a.y=d[13];a.z=d[14];d=THREE.Matrix4.__m1;d.copy(this);d.elements[0]/=c.x;d.elements[1]/=c.x;d.elements[2]/=c.x;d.elements[4]/=c.y;d.elements[5]/=c.y;d.elements[6]/=c.y;d.elements[8]/=c.z;d.elements[9]/=c.z;d.elements[10]/=c.z;b.setFromRotationMatrix(d);return[a,b,c]},extractPosition:function(a){var b=this.elements,a=a.elements;b[12]=a[12];b[13]=
a[13];b[14]=a[14];return this},extractRotation:function(a){var b=this.elements,a=a.elements,c=THREE.Matrix4.__v1,d=1/c.set(a[0],a[1],a[2]).length(),e=1/c.set(a[4],a[5],a[6]).length(),c=1/c.set(a[8],a[9],a[10]).length();b[0]=a[0]*d;b[1]=a[1]*d;b[2]=a[2]*d;b[4]=a[4]*e;b[5]=a[5]*e;b[6]=a[6]*e;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;return this},translate:function(a){var b=this.elements,c=a.x,d=a.y,a=a.z;b[12]=b[0]*c+b[4]*d+b[8]*a+b[12];b[13]=b[1]*c+b[5]*d+b[9]*a+b[13];b[14]=b[2]*c+b[6]*d+b[10]*a+b[14];
b[15]=b[3]*c+b[7]*d+b[11]*a+b[15];return this},rotateX:function(a){var b=this.elements,c=b[4],d=b[5],e=b[6],f=b[7],g=b[8],i=b[9],h=b[10],j=b[11],l=Math.cos(a),a=Math.sin(a);b[4]=l*c+a*g;b[5]=l*d+a*i;b[6]=l*e+a*h;b[7]=l*f+a*j;b[8]=l*g-a*c;b[9]=l*i-a*d;b[10]=l*h-a*e;b[11]=l*j-a*f;return this},rotateY:function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=b[8],i=b[9],h=b[10],j=b[11],l=Math.cos(a),a=Math.sin(a);b[0]=l*c-a*g;b[1]=l*d-a*i;b[2]=l*e-a*h;b[3]=l*f-a*j;b[8]=l*g+a*c;b[9]=l*i+a*d;b[10]=
l*h+a*e;b[11]=l*j+a*f;return this},rotateZ:function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],i=b[5],h=b[6],j=b[7],l=Math.cos(a),a=Math.sin(a);b[0]=l*c+a*g;b[1]=l*d+a*i;b[2]=l*e+a*h;b[3]=l*f+a*j;b[4]=l*g-a*c;b[5]=l*i-a*d;b[6]=l*h-a*e;b[7]=l*j-a*f;return this},rotateByAxis:function(a,b){var c=this.elements;if(1===a.x&&0===a.y&&0===a.z)return this.rotateX(b);if(0===a.x&&1===a.y&&0===a.z)return this.rotateY(b);if(0===a.x&&0===a.y&&1===a.z)return this.rotateZ(b);var d=a.x,e=a.y,f=a.z,
g=Math.sqrt(d*d+e*e+f*f),d=d/g,e=e/g,f=f/g,g=d*d,i=e*e,h=f*f,j=Math.cos(b),l=Math.sin(b),m=1-j,k=d*e*m,n=d*f*m,m=e*f*m,d=d*l,p=e*l,l=f*l,f=g+(1-g)*j,g=k+l,e=n-p,k=k-l,i=i+(1-i)*j,l=m+d,n=n+p,m=m-d,h=h+(1-h)*j,j=c[0],d=c[1],p=c[2],q=c[3],o=c[4],r=c[5],Q=c[6],v=c[7],s=c[8],C=c[9],J=c[10],t=c[11];c[0]=f*j+g*o+e*s;c[1]=f*d+g*r+e*C;c[2]=f*p+g*Q+e*J;c[3]=f*q+g*v+e*t;c[4]=k*j+i*o+l*s;c[5]=k*d+i*r+l*C;c[6]=k*p+i*Q+l*J;c[7]=k*q+i*v+l*t;c[8]=n*j+m*o+h*s;c[9]=n*d+m*r+h*C;c[10]=n*p+m*Q+h*J;c[11]=n*q+m*v+h*t;
return this},scale:function(a){var b=this.elements,c=a.x,d=a.y,a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a),a=Math.sin(a);
this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a),a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,i=a.z,h=e*f,j=e*g;this.set(h*f+c,h*g-d*i,h*i+d*g,0,h*g+d*i,j*g+c,j*i-d*f,0,h*i-d*g,j*i+d*f,e*i*i+c,0,0,0,0,1);return this},makeScale:function(a,
b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeFrustum:function(a,b,c,d,e,f){var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(d-c);g[9]=(d+c)/(d-c);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makePerspective:function(a,b,c,d){var a=c*Math.tan(a*Math.PI/360),e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,i=b-a,h=c-d,j=f-e;g[0]=2/
i;g[4]=0;g[8]=0;g[12]=-((b+a)/i);g[1]=0;g[5]=2/h;g[9]=0;g[13]=-((c+d)/h);g[2]=0;g[6]=0;g[10]=-2/j;g[14]=-((f+e)/j);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},clone:function(){var a=this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.Matrix4.__v1=new THREE.Vector3;THREE.Matrix4.__v2=new THREE.Vector3;THREE.Matrix4.__v3=new THREE.Vector3;THREE.Matrix4.__m1=new THREE.Matrix4;THREE.Matrix4.__m2=new THREE.Matrix4;
THREE.EventTarget=function(){var a={};this.addEventListener=function(b,c){void 0===a[b]&&(a[b]=[]);-1===a[b].indexOf(c)&&a[b].push(c)};this.dispatchEvent=function(b){for(var c in a[b.type])a[b.type][c](b)};this.removeEventListener=function(b,c){var d=a[b].indexOf(c);-1!==d&&a[b].splice(d,1)}};THREE.Frustum=function(){this.planes=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4]};
THREE.Frustum.prototype.setFromMatrix=function(a){var b=this.planes,c=a.elements,a=c[0],d=c[1],e=c[2],f=c[3],g=c[4],i=c[5],h=c[6],j=c[7],l=c[8],m=c[9],k=c[10],n=c[11],p=c[12],q=c[13],o=c[14],c=c[15];b[0].set(f-a,j-g,n-l,c-p);b[1].set(f+a,j+g,n+l,c+p);b[2].set(f+d,j+i,n+m,c+q);b[3].set(f-d,j-i,n-m,c-q);b[4].set(f-e,j-h,n-k,c-o);b[5].set(f+e,j+h,n+k,c+o);for(d=0;6>d;d++)a=b[d],a.divideScalar(Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z))};
THREE.Frustum.prototype.contains=function(a){for(var b=0,c=this.planes,b=a.matrixWorld,d=b.elements,a=-a.geometry.boundingSphere.radius*b.getMaxScaleOnAxis(),e=0;6>e;e++)if(b=c[e].x*d[12]+c[e].y*d[13]+c[e].z*d[14]+c[e].w,b<=a)return!1;return!0};THREE.Frustum.__v1=new THREE.Vector3;
(function(a){a.Ray=function(b,c,d,e){this.origin=b||new a.Vector3;this.direction=c||new a.Vector3;this.near=d||0;this.far=e||Infinity};var b=new a.Vector3,c=new a.Vector3,d=new a.Vector3,e=new a.Vector3;new a.Vector3;var f=new a.Vector3,g=new a.Matrix4,i=function(a,b){return a.distance-b.distance},h=new a.Vector3,j=new a.Vector3,l=new a.Vector3,m=function(a,b,c){h.sub(c,a);var d=h.dot(b),a=j.add(a,l.copy(b).multiplyScalar(d));return c.distanceTo(a)},k=function(a,b,c,d){h.sub(d,b);j.sub(c,b);l.sub(a,
b);var a=h.dot(h),b=h.dot(j),c=h.dot(l),e=j.dot(j),d=j.dot(l),f=1/(a*e-b*b),e=(e*c-b*d)*f,a=(a*d-b*c)*f;return 0<=e&&0<=a&&1>e+a},n=function(h,i,l){if(h instanceof a.Particle){var j=m(i.origin,i.direction,h.matrixWorld.getPosition());if(j>h.scale.x)return l;l.push({distance:j,point:h.position,face:null,object:h})}else if(h instanceof a.Mesh){var n=h.geometry.boundingSphere.radius*h.matrixWorld.getMaxScaleOnAxis(),j=m(i.origin,i.direction,h.matrixWorld.getPosition());if(j>n)return l;var n=h.geometry,
p=n.vertices,C=h.material instanceof a.MeshFaceMaterial,J=!0===C?h.material.materials:null,j=h.material.side,t,B,x,z=i.precision;h.matrixRotationWorld.extractRotation(h.matrixWorld);b.copy(i.origin);g.getInverse(h.matrixWorld);c.copy(b);g.multiplyVector3(c);d.copy(i.direction);g.rotateAxis(d).normalize();for(var D=0,W=n.faces.length;D<W;D++){var u=n.faces[D],j=!0===C?J[u.materialIndex]:h.material;if(void 0!==j&&(j=j.side,e.sub(u.centroid,c),B=u.normal,t=d.dot(B),!(Math.abs(t)<z)&&(B=B.dot(e)/t,!(0>
B)&&(j===a.DoubleSide||(j===a.FrontSide?0>t:0<t)))))if(f.add(c,d.multiplyScalar(B)),u instanceof a.Face3)j=p[u.a],t=p[u.b],B=p[u.c],k(f,j,t,B)&&(t=h.matrixWorld.multiplyVector3(f.clone()),j=b.distanceTo(t),j<i.near||j>i.far||l.push({distance:j,point:t,face:u,faceIndex:D,object:h}));else if(u instanceof a.Face4&&(j=p[u.a],t=p[u.b],B=p[u.c],x=p[u.d],k(f,j,t,x)||k(f,t,B,x)))t=h.matrixWorld.multiplyVector3(f.clone()),j=b.distanceTo(t),j<i.near||j>i.far||l.push({distance:j,point:t,face:u,faceIndex:D,object:h})}}},
p=function(a,b,c){for(var a=a.getDescendants(),d=0,e=a.length;d<e;d++)n(a[d],b,c)};a.Ray.prototype.precision=1E-4;a.Ray.prototype.set=function(a,b){this.origin=a;this.direction=b};a.Ray.prototype.intersectObject=function(a,b){var c=[];!0===b&&p(a,this,c);n(a,this,c);c.sort(i);return c};a.Ray.prototype.intersectObjects=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)n(a[d],this,c),!0===b&&p(a[d],this,c);c.sort(i);return c}})(THREE);
THREE.Rectangle=function(){function a(){f=d-b;g=e-c}var b=0,c=0,d=0,e=0,f=0,g=0,i=!0;this.getX=function(){return b};this.getY=function(){return c};this.getWidth=function(){return f};this.getHeight=function(){return g};this.getLeft=function(){return b};this.getTop=function(){return c};this.getRight=function(){return d};this.getBottom=function(){return e};this.set=function(f,g,l,m){i=!1;b=f;c=g;d=l;e=m;a()};this.addPoint=function(f,g){!0===i?(i=!1,b=f,c=g,d=f,e=g):(b=b<f?b:f,c=c<g?c:g,d=d>f?d:f,e=e>
g?e:g);a()};this.add3Points=function(f,g,l,m,k,n){!0===i?(i=!1,b=f<l?f<k?f:k:l<k?l:k,c=g<m?g<n?g:n:m<n?m:n,d=f>l?f>k?f:k:l>k?l:k,e=g>m?g>n?g:n:m>n?m:n):(b=f<l?f<k?f<b?f:b:k<b?k:b:l<k?l<b?l:b:k<b?k:b,c=g<m?g<n?g<c?g:c:n<c?n:c:m<n?m<c?m:c:n<c?n:c,d=f>l?f>k?f>d?f:d:k>d?k:d:l>k?l>d?l:d:k>d?k:d,e=g>m?g>n?g>e?g:e:n>e?n:e:m>n?m>e?m:e:n>e?n:e);a()};this.addRectangle=function(f){!0===i?(i=!1,b=f.getLeft(),c=f.getTop(),d=f.getRight(),e=f.getBottom()):(b=b<f.getLeft()?b:f.getLeft(),c=c<f.getTop()?c:f.getTop(),
d=d>f.getRight()?d:f.getRight(),e=e>f.getBottom()?e:f.getBottom());a()};this.inflate=function(f){b-=f;c-=f;d+=f;e+=f;a()};this.minSelf=function(f){b=b>f.getLeft()?b:f.getLeft();c=c>f.getTop()?c:f.getTop();d=d<f.getRight()?d:f.getRight();e=e<f.getBottom()?e:f.getBottom();a()};this.intersects=function(a){return d<a.getLeft()||b>a.getRight()||e<a.getTop()||c>a.getBottom()?!1:!0};this.empty=function(){i=!0;e=d=c=b=0;a()};this.isEmpty=function(){return i}};
THREE.Math={clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0}};
THREE.Object3D=function(){THREE.Object3DLibrary.push(this);this.id=THREE.Object3DIdCount++;this.name="";this.properties={};this.parent=void 0;this.children=[];this.up=new THREE.Vector3(0,1,0);this.position=new THREE.Vector3;this.rotation=new THREE.Vector3;this.eulerOrder=THREE.Object3D.defaultEulerOrder;this.scale=new THREE.Vector3(1,1,1);this.renderDepth=null;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixRotationWorld=new THREE.Matrix4;this.matrixWorldNeedsUpdate=
this.matrixAutoUpdate=!0;this.quaternion=new THREE.Quaternion;this.useQuaternion=!1;this.boundRadius=0;this.boundRadiusScale=1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this._vector=new THREE.Vector3};
THREE.Object3D.prototype={constructor:THREE.Object3D,applyMatrix:function(a){this.matrix.multiply(a,this.matrix);this.scale.getScaleFromMatrix(this.matrix);a=(new THREE.Matrix4).extractRotation(this.matrix);this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder);this.position.getPositionFromMatrix(this.matrix)},translate:function(a,b){this.matrix.rotateAxis(b);this.position.addSelf(b.multiplyScalar(a))},translateX:function(a){this.translate(a,this._vector.set(1,0,0))},translateY:function(a){this.translate(a,
this._vector.set(0,1,0))},translateZ:function(a){this.translate(a,this._vector.set(0,0,1))},localToWorld:function(a){return this.matrixWorld.multiplyVector3(a)},worldToLocal:function(a){return THREE.Object3D.__m1.getInverse(this.matrixWorld).multiplyVector3(a)},lookAt:function(a){this.matrix.lookAt(a,this.position,this.up);this.rotationAutoUpdate&&(!1===this.useQuaternion?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):this.quaternion.copy(this.matrix.decompose()[1]))},add:function(a){if(a===
this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");else if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=void 0;this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},
traverse:function(a){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},getChildByName:function(a,b){for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c];if(e.name===a||!0===b&&(e=e.getChildByName(a,b),void 0!==e))return e}},getDescendants:function(a){void 0===a&&(a=[]);Array.prototype.push.apply(a,this.children);for(var b=0,c=this.children.length;b<c;b++)this.children[b].getDescendants(a);return a},updateMatrix:function(){this.matrix.setPosition(this.position);
!1===this.useQuaternion?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion);if(1!==this.scale.x||1!==this.scale.y||1!==this.scale.z)this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,Math.max(this.scale.y,this.scale.z));this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):
this.matrixWorld.multiply(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},clone:function(a){void 0===a&&(a=new THREE.Object3D);a.name=this.name;a.up.copy(this.up);a.position.copy(this.position);a.rotation instanceof THREE.Vector3&&a.rotation.copy(this.rotation);a.eulerOrder=this.eulerOrder;a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);
a.matrixWorld.copy(this.matrixWorld);a.matrixRotationWorld.copy(this.matrixRotationWorld);a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.quaternion.copy(this.quaternion);a.useQuaternion=this.useQuaternion;a.boundRadius=this.boundRadius;a.boundRadiusScale=this.boundRadiusScale;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;for(var b=0;b<this.children.length;b++)a.add(this.children[b].clone());
return a},deallocate:function(){var a=THREE.Object3DLibrary.indexOf(this);-1!==a&&THREE.Object3DLibrary.splice(a,1)}};THREE.Object3D.__m1=new THREE.Matrix4;THREE.Object3D.defaultEulerOrder="XYZ";THREE.Object3DIdCount=0;THREE.Object3DLibrary=[];
THREE.Projector=function(){function a(){if(f===i){var a=new THREE.RenderableObject;g.push(a);i++;f++;return a}return g[f++]}function b(){if(j===m){var a=new THREE.RenderableVertex;l.push(a);m++;j++;return a}return l[j++]}function c(a,b){return b.z-a.z}function d(a,b){var c=0,d=1,e=a.z+a.w,f=b.z+b.w,g=-a.z+a.w,h=-b.z+b.w;if(0<=e&&0<=f&&0<=g&&0<=h)return!0;if(0>e&&0>f||0>g&&0>h)return!1;0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f)));0>g?c=Math.max(c,g/(g-h)):0>h&&(d=Math.min(d,g/(g-h)));if(d<
c)return!1;a.lerpSelf(b,c);b.lerpSelf(a,1-d);return!0}var e,f,g=[],i=0,h,j,l=[],m=0,k,n,p=[],q=0,o,r=[],Q=0,v,s,C=[],J=0,t,B,x=[],z=0,D={objects:[],sprites:[],lights:[],elements:[]},W=new THREE.Vector3,u=new THREE.Vector4,R=new THREE.Matrix4,G=new THREE.Matrix4,I=new THREE.Matrix3,K=new THREE.Frustum,S=new THREE.Vector4,F=new THREE.Vector4;this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);R.multiply(b.projectionMatrix,b.matrixWorldInverse);R.multiplyVector3(a);return a};
this.unprojectVector=function(a,b){b.projectionMatrixInverse.getInverse(b.projectionMatrix);R.multiply(b.matrixWorld,b.projectionMatrixInverse);R.multiplyVector3(a);return a};this.pickingRay=function(a,b){var c;a.z=-1;c=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(c,b);c.subSelf(a).normalize();return new THREE.Ray(a,c)};this.projectScene=function(g,i,m,P){var L=i.near,Y=i.far,ma=!1,y,N,O,A,V,H,M,$,ia,fa,ga,Z,pa,za,ta;B=s=o=n=0;D.elements.length=0;g.updateMatrixWorld();
void 0===i.parent&&i.updateMatrixWorld();i.matrixWorldInverse.getInverse(i.matrixWorld);R.multiply(i.projectionMatrix,i.matrixWorldInverse);K.setFromMatrix(R);f=0;D.objects.length=0;D.sprites.length=0;D.lights.length=0;var Aa=function(b){for(var c=0,d=b.children.length;c<d;c++){var f=b.children[c];if(!1!==f.visible){if(f instanceof THREE.Light)D.lights.push(f);else if(f instanceof THREE.Mesh||f instanceof THREE.Line){if(!1===f.frustumCulled||!0===K.contains(f))e=a(),e.object=f,null!==f.renderDepth?
e.z=f.renderDepth:(W.copy(f.matrixWorld.getPosition()),R.multiplyVector3(W),e.z=W.z),D.objects.push(e)}else f instanceof THREE.Sprite||f instanceof THREE.Particle?(e=a(),e.object=f,null!==f.renderDepth?e.z=f.renderDepth:(W.copy(f.matrixWorld.getPosition()),R.multiplyVector3(W),e.z=W.z),D.sprites.push(e)):(e=a(),e.object=f,null!==f.renderDepth?e.z=f.renderDepth:(W.copy(f.matrixWorld.getPosition()),R.multiplyVector3(W),e.z=W.z),D.objects.push(e));Aa(f)}}};Aa(g);!0===m&&D.objects.sort(c);g=0;for(m=D.objects.length;g<
m;g++)if($=D.objects[g].object,ia=$.matrixWorld,j=0,$ instanceof THREE.Mesh){fa=$.geometry;O=fa.vertices;ga=fa.faces;fa=fa.faceVertexUvs;I.getInverse(ia);I.transpose();pa=$.material instanceof THREE.MeshFaceMaterial;za=!0===pa?$.material:null;y=0;for(N=O.length;y<N;y++)h=b(),h.positionWorld.copy(O[y]),ia.multiplyVector3(h.positionWorld),h.positionScreen.copy(h.positionWorld),R.multiplyVector4(h.positionScreen),h.positionScreen.x/=h.positionScreen.w,h.positionScreen.y/=h.positionScreen.w,h.visible=
h.positionScreen.z>L&&h.positionScreen.z<Y;O=0;for(y=ga.length;O<y;O++)if(N=ga[O],ta=!0===pa?za.materials[N.materialIndex]:$.material,void 0!==ta){H=ta.side;if(N instanceof THREE.Face3)if(A=l[N.a],V=l[N.b],M=l[N.c],!0===A.visible&&!0===V.visible&&!0===M.visible)if(ma=0>(M.positionScreen.x-A.positionScreen.x)*(V.positionScreen.y-A.positionScreen.y)-(M.positionScreen.y-A.positionScreen.y)*(V.positionScreen.x-A.positionScreen.x),H===THREE.DoubleSide||ma===(H===THREE.FrontSide))n===q?(Z=new THREE.RenderableFace3,
p.push(Z),q++,n++,k=Z):k=p[n++],k.v1.copy(A),k.v2.copy(V),k.v3.copy(M);else continue;else continue;else if(N instanceof THREE.Face4)if(A=l[N.a],V=l[N.b],M=l[N.c],Z=l[N.d],!0===A.visible&&!0===V.visible&&!0===M.visible&&!0===Z.visible)if(ma=0>(Z.positionScreen.x-A.positionScreen.x)*(V.positionScreen.y-A.positionScreen.y)-(Z.positionScreen.y-A.positionScreen.y)*(V.positionScreen.x-A.positionScreen.x)||0>(V.positionScreen.x-M.positionScreen.x)*(Z.positionScreen.y-M.positionScreen.y)-(V.positionScreen.y-
M.positionScreen.y)*(Z.positionScreen.x-M.positionScreen.x),H===THREE.DoubleSide||ma===(H===THREE.FrontSide)){if(o===Q){var Ba=new THREE.RenderableFace4;r.push(Ba);Q++;o++;k=Ba}else k=r[o++];k.v1.copy(A);k.v2.copy(V);k.v3.copy(M);k.v4.copy(Z)}else continue;else continue;k.normalWorld.copy(N.normal);!1===ma&&(H===THREE.BackSide||H===THREE.DoubleSide)&&k.normalWorld.negate();I.multiplyVector3(k.normalWorld).normalize();k.centroidWorld.copy(N.centroid);ia.multiplyVector3(k.centroidWorld);k.centroidScreen.copy(k.centroidWorld);
R.multiplyVector3(k.centroidScreen);M=N.vertexNormals;A=0;for(V=M.length;A<V;A++)Z=k.vertexNormalsWorld[A],Z.copy(M[A]),!1===ma&&(H===THREE.BackSide||H===THREE.DoubleSide)&&Z.negate(),I.multiplyVector3(Z).normalize();k.vertexNormalsLength=M.length;A=0;for(V=fa.length;A<V;A++)if(Z=fa[A][O],void 0!==Z){H=0;for(M=Z.length;H<M;H++)k.uvs[A][H]=Z[H]}k.color=N.color;k.material=ta;k.z=k.centroidScreen.z;D.elements.push(k)}}else if($ instanceof THREE.Line){G.multiply(R,ia);O=$.geometry.vertices;A=b();A.positionScreen.copy(O[0]);
G.multiplyVector4(A.positionScreen);ia=$.type===THREE.LinePieces?2:1;y=1;for(N=O.length;y<N;y++)A=b(),A.positionScreen.copy(O[y]),G.multiplyVector4(A.positionScreen),0<(y+1)%ia||(V=l[j-2],S.copy(A.positionScreen),F.copy(V.positionScreen),!0===d(S,F)&&(S.multiplyScalar(1/S.w),F.multiplyScalar(1/F.w),s===J?(ga=new THREE.RenderableLine,C.push(ga),J++,s++,v=ga):v=C[s++],v.v1.positionScreen.copy(S),v.v2.positionScreen.copy(F),v.z=Math.max(S.z,F.z),v.material=$.material,D.elements.push(v)))}g=0;for(m=D.sprites.length;g<
m;g++)$=D.sprites[g].object,ia=$.matrixWorld,$ instanceof THREE.Particle&&(u.set(ia.elements[12],ia.elements[13],ia.elements[14],1),R.multiplyVector4(u),u.z/=u.w,0<u.z&&1>u.z&&(B===z?(L=new THREE.RenderableParticle,x.push(L),z++,B++,t=L):t=x[B++],t.object=$,t.x=u.x/u.w,t.y=u.y/u.w,t.z=u.z,t.rotation=$.rotation.z,t.scale.x=$.scale.x*Math.abs(t.x-(u.x+i.projectionMatrix.elements[0])/(u.w+i.projectionMatrix.elements[12])),t.scale.y=$.scale.y*Math.abs(t.y-(u.y+i.projectionMatrix.elements[5])/(u.w+i.projectionMatrix.elements[13])),
t.material=$.material,D.elements.push(t)));!0===P&&D.elements.sort(c);return D}};THREE.Quaternion=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},setFromEuler:function(a,b){var c=Math.cos(a.x/2),d=Math.cos(a.y/2),e=Math.cos(a.z/2),f=Math.sin(a.x/2),g=Math.sin(a.y/2),i=Math.sin(a.z/2);void 0===b||"XYZ"===b?(this.x=f*d*e+c*g*i,this.y=c*g*e-f*d*i,this.z=c*d*i+f*g*e,this.w=c*d*e-f*g*i):"YXZ"===b?(this.x=f*d*e+c*g*i,this.y=c*g*e-f*d*i,this.z=c*d*
i-f*g*e,this.w=c*d*e+f*g*i):"ZXY"===b?(this.x=f*d*e-c*g*i,this.y=c*g*e+f*d*i,this.z=c*d*i+f*g*e,this.w=c*d*e-f*g*i):"ZYX"===b?(this.x=f*d*e-c*g*i,this.y=c*g*e+f*d*i,this.z=c*d*i-f*g*e,this.w=c*d*e+f*g*i):"YZX"===b?(this.x=f*d*e+c*g*i,this.y=c*g*e+f*d*i,this.z=c*d*i-f*g*e,this.w=c*d*e-f*g*i):"XZY"===b&&(this.x=f*d*e-c*g*i,this.y=c*g*e-f*d*i,this.z=c*d*i+f*g*e,this.w=c*d*e+f*g*i);return this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);this.x=a.x*d;this.y=a.y*d;this.z=a.z*d;this.w=Math.cos(c);
return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0],a=b[4],d=b[8],e=b[1],f=b[5],g=b[9],i=b[2],h=b[6],b=b[10],j=c+f+b;0<j?(c=0.5/Math.sqrt(j+1),this.w=0.25/c,this.x=(h-g)*c,this.y=(d-i)*c,this.z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this.w=(h-g)/c,this.x=0.25*c,this.y=(a+e)/c,this.z=(d+i)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this.w=(d-i)/c,this.x=(a+e)/c,this.y=0.25*c,this.z=(g+h)/c):(c=2*Math.sqrt(1+b-c-f),this.w=(e-a)/c,this.x=(d+i)/c,this.y=(g+h)/c,this.z=0.25*c);return this},inverse:function(){this.conjugate().normalize();
return this},conjugate:function(){this.x*=-1;this.y*=-1;this.z*=-1;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===a?(this.z=this.y=this.x=0,this.w=1):(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a);return this},multiply:function(a,b){var c=a.x,d=a.y,e=a.z,f=a.w,g=b.x,i=b.y,h=b.z,j=b.w;this.x=c*j+d*h-e*i+f*g;this.y=-c*h+d*j+e*g+f*i;this.z=c*i-
d*g+e*j+f*h;this.w=-c*g-d*i-e*h+f*j;return this},multiplySelf:function(a){var b=this.x,c=this.y,d=this.z,e=this.w,f=a.x,g=a.y,i=a.z,a=a.w;this.x=b*a+e*f+c*i-d*g;this.y=c*a+e*g+d*f-b*i;this.z=d*a+e*i+b*g-c*f;this.w=e*a-b*f-c*g-d*i;return this},multiplyVector3:function(a,b){b||(b=a);var c=a.x,d=a.y,e=a.z,f=this.x,g=this.y,i=this.z,h=this.w,j=h*c+g*e-i*d,l=h*d+i*c-f*e,m=h*e+f*d-g*c,c=-f*c-g*d-i*e;b.x=j*h+c*-f+l*-i-m*-g;b.y=l*h+c*-g+m*-f-j*-i;b.z=m*h+c*-i+j*-g-l*-f;return b},slerpSelf:function(a,b){var c=
this.x,d=this.y,e=this.z,f=this.w,g=f*a.w+c*a.x+d*a.y+e*a.z;0>g?(this.w=-a.w,this.x=-a.x,this.y=-a.y,this.z=-a.z,g=-g):this.copy(a);if(1<=g)return this.w=f,this.x=c,this.y=d,this.z=e,this;var i=Math.acos(g),h=Math.sqrt(1-g*g);if(0.0010>Math.abs(h))return this.w=0.5*(f+this.w),this.x=0.5*(c+this.x),this.y=0.5*(d+this.y),this.z=0.5*(e+this.z),this;g=Math.sin((1-b)*i)/h;i=Math.sin(b*i)/h;this.w=f*g+this.w*i;this.x=c*g+this.x*i;this.y=d*g+this.y*i;this.z=e*g+this.z*i;return this},clone:function(){return new THREE.Quaternion(this.x,
this.y,this.z,this.w)}};THREE.Quaternion.slerp=function(a,b,c,d){var e=a.w*b.w+a.x*b.x+a.y*b.y+a.z*b.z;0>e?(c.w=-b.w,c.x=-b.x,c.y=-b.y,c.z=-b.z,e=-e):c.copy(b);if(1<=Math.abs(e))return c.w=a.w,c.x=a.x,c.y=a.y,c.z=a.z,c;var b=Math.acos(e),f=Math.sqrt(1-e*e);if(0.0010>Math.abs(f))return c.w=0.5*(a.w+c.w),c.x=0.5*(a.x+c.x),c.y=0.5*(a.y+c.y),c.z=0.5*(a.z+c.z),c;e=Math.sin((1-d)*b)/f;d=Math.sin(d*b)/f;c.w=a.w*e+c.w*d;c.x=a.x*e+c.x*d;c.y=a.y*e+c.y*d;c.z=a.z*e+c.z*d;return c};
THREE.Vertex=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};THREE.Face3=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3;this.vertexNormals=d instanceof Array?d:[];this.color=e instanceof THREE.Color?e:new THREE.Color;this.vertexColors=e instanceof Array?e:[];this.vertexTangents=[];this.materialIndex=f;this.centroid=new THREE.Vector3};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.centroid.copy(this.centroid);a.materialIndex=this.materialIndex;var b,c;b=0;for(c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();
return a}};THREE.Face4=function(a,b,c,d,e,f,g){this.a=a;this.b=b;this.c=c;this.d=d;this.normal=e instanceof THREE.Vector3?e:new THREE.Vector3;this.vertexNormals=e instanceof Array?e:[];this.color=f instanceof THREE.Color?f:new THREE.Color;this.vertexColors=f instanceof Array?f:[];this.vertexTangents=[];this.materialIndex=g;this.centroid=new THREE.Vector3};
THREE.Face4.prototype={constructor:THREE.Face4,clone:function(){var a=new THREE.Face4(this.a,this.b,this.c,this.d);a.normal.copy(this.normal);a.color.copy(this.color);a.centroid.copy(this.centroid);a.materialIndex=this.materialIndex;var b,c;b=0;for(c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();
return a}};THREE.UV=function(a,b){this.u=a||0;this.v=b||0};THREE.UV.prototype={constructor:THREE.UV,set:function(a,b){this.u=a;this.v=b;return this},copy:function(a){this.u=a.u;this.v=a.v;return this},lerpSelf:function(a,b){this.u+=(a.u-this.u)*b;this.v+=(a.v-this.v)*b;return this},clone:function(){return new THREE.UV(this.u,this.v)}};
THREE.Geometry=function(){THREE.GeometryLibrary.push(this);this.id=THREE.GeometryIdCount++;this.name="";this.vertices=[];this.colors=[];this.normals=[];this.faces=[];this.faceUvs=[[]];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=
this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){var b=new THREE.Matrix3;b.getInverse(a).transpose();for(var c=0,d=this.vertices.length;c<d;c++)a.multiplyVector3(this.vertices[c]);c=0;for(d=this.faces.length;c<d;c++){var e=this.faces[c];b.multiplyVector3(e.normal).normalize();for(var f=0,g=e.vertexNormals.length;f<g;f++)b.multiplyVector3(e.vertexNormals[f]).normalize();a.multiplyVector3(e.centroid)}},computeCentroids:function(){var a,b,c;a=0;for(b=this.faces.length;a<b;a++)c=
this.faces[a],c.centroid.set(0,0,0),c instanceof THREE.Face3?(c.centroid.addSelf(this.vertices[c.a]),c.centroid.addSelf(this.vertices[c.b]),c.centroid.addSelf(this.vertices[c.c]),c.centroid.divideScalar(3)):c instanceof THREE.Face4&&(c.centroid.addSelf(this.vertices[c.a]),c.centroid.addSelf(this.vertices[c.b]),c.centroid.addSelf(this.vertices[c.c]),c.centroid.addSelf(this.vertices[c.d]),c.centroid.divideScalar(4))},computeFaceNormals:function(){var a,b,c,d,e,f,g=new THREE.Vector3,i=new THREE.Vector3;
a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],d=this.vertices[c.a],e=this.vertices[c.b],f=this.vertices[c.c],g.sub(f,e),i.sub(d,e),g.crossSelf(i),g.normalize(),c.normal.copy(g)},computeVertexNormals:function(a){var b,c,d,e;if(void 0===this.__tmpVertices){e=this.__tmpVertices=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)e[b]=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d instanceof THREE.Face3?d.vertexNormals=[new THREE.Vector3,new THREE.Vector3,
new THREE.Vector3]:d instanceof THREE.Face4&&(d.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}else{e=this.__tmpVertices;b=0;for(c=this.vertices.length;b<c;b++)e[b].set(0,0,0)}if(a){var f,g,i,h=new THREE.Vector3,j=new THREE.Vector3,l=new THREE.Vector3,m=new THREE.Vector3,k=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d instanceof THREE.Face3?(a=this.vertices[d.a],f=this.vertices[d.b],g=this.vertices[d.c],h.sub(g,f),j.sub(a,f),h.crossSelf(j),
e[d.a].addSelf(h),e[d.b].addSelf(h),e[d.c].addSelf(h)):d instanceof THREE.Face4&&(a=this.vertices[d.a],f=this.vertices[d.b],g=this.vertices[d.c],i=this.vertices[d.d],l.sub(i,f),j.sub(a,f),l.crossSelf(j),e[d.a].addSelf(l),e[d.b].addSelf(l),e[d.d].addSelf(l),m.sub(i,g),k.sub(f,g),m.crossSelf(k),e[d.b].addSelf(m),e[d.c].addSelf(m),e[d.d].addSelf(m))}else{b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d instanceof THREE.Face3?(e[d.a].addSelf(d.normal),e[d.b].addSelf(d.normal),e[d.c].addSelf(d.normal)):
d instanceof THREE.Face4&&(e[d.a].addSelf(d.normal),e[d.b].addSelf(d.normal),e[d.c].addSelf(d.normal),e[d.d].addSelf(d.normal))}b=0;for(c=this.vertices.length;b<c;b++)e[b].normalize();b=0;for(c=this.faces.length;b<c;b++)d=this.faces[b],d instanceof THREE.Face3?(d.vertexNormals[0].copy(e[d.a]),d.vertexNormals[1].copy(e[d.b]),d.vertexNormals[2].copy(e[d.c])):d instanceof THREE.Face4&&(d.vertexNormals[0].copy(e[d.a]),d.vertexNormals[1].copy(e[d.b]),d.vertexNormals[2].copy(e[d.c]),d.vertexNormals[3].copy(e[d.d]))},
computeMorphNormals:function(){var a,b,c,d,e;c=0;for(d=this.faces.length;c<d;c++){e=this.faces[c];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone();e.__originalVertexNormals||(e.__originalVertexNormals=[]);a=0;for(b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone()}var f=new THREE.Geometry;f.faces=this.faces;a=0;for(b=this.morphTargets.length;a<
b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];var g=this.morphNormals[a].faceNormals,i=this.morphNormals[a].vertexNormals,h,j;c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],h=new THREE.Vector3,j=e instanceof THREE.Face3?{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3}:{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3,d:new THREE.Vector3},g.push(h),i.push(j)}g=this.morphNormals[a];f.vertices=
this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],h=g.faceNormals[c],j=g.vertexNormals[c],h.copy(e.normal),e instanceof THREE.Face3?(j.a.copy(e.vertexNormals[0]),j.b.copy(e.vertexNormals[1]),j.c.copy(e.vertexNormals[2])):(j.a.copy(e.vertexNormals[0]),j.b.copy(e.vertexNormals[1]),j.c.copy(e.vertexNormals[2]),j.d.copy(e.vertexNormals[3]))}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,
e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){function a(a,b,c,d,e,f,u){i=a.vertices[b];h=a.vertices[c];j=a.vertices[d];l=g[e];m=g[f];k=g[u];n=h.x-i.x;p=j.x-i.x;q=h.y-i.y;o=j.y-i.y;r=h.z-i.z;Q=j.z-i.z;v=m.u-l.u;s=k.u-l.u;C=m.v-l.v;J=k.v-l.v;t=1/(v*J-s*C);D.set((J*n-C*p)*t,(J*q-C*o)*t,(J*r-C*Q)*t);W.set((v*p-s*n)*t,(v*o-s*q)*t,(v*Q-s*r)*t);x[b].addSelf(D);x[c].addSelf(D);x[d].addSelf(D);z[b].addSelf(W);z[c].addSelf(W);z[d].addSelf(W)}var b,c,d,e,f,g,i,h,j,l,m,k,n,p,q,o,r,Q,
v,s,C,J,t,B,x=[],z=[],D=new THREE.Vector3,W=new THREE.Vector3,u=new THREE.Vector3,R=new THREE.Vector3,G=new THREE.Vector3;b=0;for(c=this.vertices.length;b<c;b++)x[b]=new THREE.Vector3,z[b]=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)f=this.faces[b],g=this.faceVertexUvs[0][b],f instanceof THREE.Face3?a(this,f.a,f.b,f.c,0,1,2):f instanceof THREE.Face4&&(a(this,f.a,f.b,f.d,0,1,3),a(this,f.b,f.c,f.d,1,2,3));var I=["a","b","c","d"];b=0;for(c=this.faces.length;b<c;b++){f=this.faces[b];for(d=0;d<
f.vertexNormals.length;d++)G.copy(f.vertexNormals[d]),e=f[I[d]],B=x[e],u.copy(B),u.subSelf(G.multiplyScalar(G.dot(B))).normalize(),R.cross(f.vertexNormals[d],B),e=R.dot(z[e]),e=0>e?-1:1,f.vertexTangents[d]=new THREE.Vector4(u.x,u.y,u.z,e)}this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,d=b.length;c<d;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){this.boundingBox||(this.boundingBox={min:new THREE.Vector3,max:new THREE.Vector3});
if(0<this.vertices.length){var a;a=this.vertices[0];this.boundingBox.min.copy(a);this.boundingBox.max.copy(a);for(var b=this.boundingBox.min,c=this.boundingBox.max,d=1,e=this.vertices.length;d<e;d++)(a=this.vertices[d],a.x<b.x?b.x=a.x:a.x>c.x&&(c.x=a.x),a.y<b.y?b.y=a.y:a.y>c.y&&(c.y=a.y),a.z<b.z)?b.z=a.z:a.z>c.z&&(c.z=a.z)}else this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)},computeBoundingSphere:function(){var a=0;null===this.boundingSphere&&(this.boundingSphere={radius:0});for(var b=
0,c=this.vertices.length;b<c;b++){var d=this.vertices[b].lengthSq();d>a&&(a=d)}this.boundingSphere.radius=Math.sqrt(a)},mergeVertices:function(){var a={},b=[],c=[],d,e=Math.pow(10,4),f,g,i,h;f=0;for(g=this.vertices.length;f<g;f++)d=this.vertices[f],d=[Math.round(d.x*e),Math.round(d.y*e),Math.round(d.z*e)].join("_"),void 0===a[d]?(a[d]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[d]];f=0;for(g=this.faces.length;f<g;f++)if(a=this.faces[f],a instanceof THREE.Face3)a.a=c[a.a],a.b=c[a.b],a.c=c[a.c];
else if(a instanceof THREE.Face4){a.a=c[a.a];a.b=c[a.b];a.c=c[a.c];a.d=c[a.d];d=[a.a,a.b,a.c,a.d];for(e=3;0<e;e--)if(d.indexOf(a["abcd"[e]])!==e){d.splice(e,1);this.faces[f]=new THREE.Face3(d[0],d[1],d[2],a.normal,a.color,a.materialIndex);d=0;for(i=this.faceVertexUvs.length;d<i;d++)(h=this.faceVertexUvs[d][f])&&h.splice(e,1);this.faces[f].vertexColors=a.vertexColors;break}}c=this.vertices.length-b.length;this.vertices=b;return c},clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,d=
b.length;c<d;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(d=b.length;c<d;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(d=b.length;c<d;c++){for(var e=b[c],f=[],g=0,i=e.length;g<i;g++)f.push(new THREE.UV(e[g].u,e[g].v));a.faceVertexUvs[0].push(f)}return a},deallocate:function(){var a=THREE.GeometryLibrary.indexOf(this);-1!==a&&THREE.GeometryLibrary.splice(a,1)}};THREE.GeometryIdCount=0;THREE.GeometryLibrary=[];
THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4;this.projectionMatrixInverse=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(a){this.matrix.lookAt(this.position,a,this.up);!0===this.rotationAutoUpdate&&(!1===this.useQuaternion?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):this.quaternion.copy(this.matrix.decompose()[1]))};
THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void 0!==e?e:0.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};
THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:0.1;this.far=void 0!==d?d:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*Math.atan(b/(2*a))*(180/Math.PI);this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,f){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=d;this.width=e;this.height=f;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(this.fov*Math.PI/360)*this.near,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*a/this.fullWidth,d+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position=new THREE.Vector3(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=
new THREE.Vector3(0,0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,0.99,0.998];this.shadowCascadeFarZ=[0.99,0.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.position=new THREE.Vector3(0,0,0);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.Loader=function(a){this.statusDomElement=(this.showStatus=a)?THREE.Loader.prototype.addStatusElement():null;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:"anonymous",addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1E3;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/
a.total).toFixed(0)+"%"):b+((a.loaded/1E3).toFixed(2)+" KB");this.statusDomElement.innerHTML=b},extractUrlBase:function(a){a=a.split("/");a.pop();return(1>a.length?".":a.join("/"))+"/"},initMaterials:function(a,b){for(var c=[],d=0;d<a.length;++d)c[d]=THREE.Loader.prototype.createMaterial(a[d],b);return c},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.floor(a)==
a}function d(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function e(a,e,f,h,i,j,o){var r=f.toLowerCase().endsWith(".dds"),Q=b+"/"+f;if(r){var v=THREE.ImageUtils.loadCompressedTexture(Q);a[e]=v}else v=document.createElement("canvas"),a[e]=new THREE.Texture(v);a[e].sourceFile=f;if(h&&(a[e].repeat.set(h[0],h[1]),1!==h[0]&&(a[e].wrapS=THREE.RepeatWrapping),1!==h[1]))a[e].wrapT=THREE.RepeatWrapping;i&&a[e].offset.set(i[0],i[1]);if(j&&(f={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},
void 0!==f[j[0]]&&(a[e].wrapS=f[j[0]]),void 0!==f[j[1]]))a[e].wrapT=f[j[1]];o&&(a[e].anisotropy=o);if(!r){var s=a[e],a=new Image;a.onload=function(){if(!c(this.width)||!c(this.height)){var a=d(this.width),b=d(this.height);s.image.width=a;s.image.height=b;s.image.getContext("2d").drawImage(this,0,0,a,b)}else s.image=this;s.needsUpdate=true};a.crossOrigin=g.crossOrigin;a.src=Q}}function f(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var g=this,i="MeshLambertMaterial",h={color:15658734,opacity:1,map:null,
lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var j=a.shading.toLowerCase();"phong"===j?i="MeshPhongMaterial":"basic"===j&&(i="MeshBasicMaterial")}void 0!==a.blending&&void 0!==THREE[a.blending]&&(h.blending=THREE[a.blending]);if(void 0!==a.transparent||1>a.opacity)h.transparent=a.transparent;void 0!==a.depthTest&&(h.depthTest=a.depthTest);void 0!==a.depthWrite&&(h.depthWrite=a.depthWrite);void 0!==a.visible&&(h.visible=a.visible);void 0!==a.flipSided&&(h.side=THREE.BackSide);
void 0!==a.doubleSided&&(h.side=THREE.DoubleSide);void 0!==a.wireframe&&(h.wireframe=a.wireframe);void 0!==a.vertexColors&&("face"===a.vertexColors?h.vertexColors=THREE.FaceColors:a.vertexColors&&(h.vertexColors=THREE.VertexColors));a.colorDiffuse?h.color=f(a.colorDiffuse):a.DbgColor&&(h.color=a.DbgColor);a.colorSpecular&&(h.specular=f(a.colorSpecular));a.colorAmbient&&(h.ambient=f(a.colorAmbient));a.transparency&&(h.opacity=a.transparency);a.specularCoef&&(h.shininess=a.specularCoef);a.mapDiffuse&&
b&&e(h,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);a.mapLight&&b&&e(h,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);a.mapBump&&b&&e(h,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);a.mapNormal&&b&&e(h,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);a.mapSpecular&&b&&e(h,"specularMap",a.mapSpecular,a.mapSpecularRepeat,
a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);a.mapBumpScale&&(h.bumpScale=a.mapBumpScale);a.mapNormal?(i=THREE.ShaderUtils.lib.normal,j=THREE.UniformsUtils.clone(i.uniforms),j.tNormal.value=h.normalMap,a.mapNormalFactor&&j.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),h.map&&(j.tDiffuse.value=h.map,j.enableDiffuse.value=!0),h.specularMap&&(j.tSpecular.value=h.specularMap,j.enableSpecular.value=!0),h.lightMap&&(j.tAO.value=h.lightMap,j.enableAO.value=!0),j.uDiffuseColor.value.setHex(h.color),
j.uSpecularColor.value.setHex(h.specular),j.uAmbientColor.value.setHex(h.ambient),j.uShininess.value=h.shininess,void 0!==h.opacity&&(j.uOpacity.value=h.opacity),h=new THREE.ShaderMaterial({fragmentShader:i.fragmentShader,vertexShader:i.vertexShader,uniforms:j,lights:!0,fog:!0})):h=new THREE[i](h);void 0!==a.DbgName&&(h.name=a.DbgName);return h}};THREE.BinaryLoader=function(a){THREE.Loader.call(this,a)};THREE.BinaryLoader.prototype=Object.create(THREE.Loader.prototype);
THREE.BinaryLoader.prototype.load=function(a,b,c,d){var c=c&&"string"===typeof c?c:this.extractUrlBase(a),d=d&&"string"===typeof d?d:this.extractUrlBase(a),e=this.showProgress?THREE.Loader.prototype.updateProgress:null;this.onLoadStart();this.loadAjaxJSON(this,a,b,c,d,e)};
THREE.BinaryLoader.prototype.loadAjaxJSON=function(a,b,c,d,e,f){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState)if(200==g.status||0==g.status){var i=JSON.parse(g.responseText);a.loadAjaxBuffers(i,c,e,d,f)}else console.error("THREE.BinaryLoader: Couldn't load ["+b+"] ["+g.status+"]")};g.open("GET",b,!0);g.send(null)};
THREE.BinaryLoader.prototype.loadAjaxBuffers=function(a,b,c,d,e){var f=new XMLHttpRequest,g=c+"/"+a.buffers,i=0;f.onreadystatechange=function(){if(4==f.readyState)if(200==f.status||0==f.status){var c=f.response;void 0===c&&(c=(new Uint8Array(f.responseBody)).buffer);THREE.BinaryLoader.prototype.createBinModel(c,b,d,a.materials)}else console.error("THREE.BinaryLoader: Couldn't load ["+g+"] ["+f.status+"]");else 3==f.readyState?e&&(0==i&&(i=f.getResponseHeader("Content-Length")),e({total:i,loaded:f.responseText.length})):
2==f.readyState&&(i=f.getResponseHeader("Content-Length"))};f.open("GET",g,!0);f.responseType="arraybuffer";f.send(null)};
THREE.BinaryLoader.prototype.createBinModel=function(a,b,c,d){var e=function(){var b,c,d,e,j,l,m,k,n,p,q,o,r,Q,v,s;function C(a){return a%4?4-a%4:0}function J(a,b){return(new Uint8Array(a,b,1))[0]}function t(a,b){return(new Uint32Array(a,b,1))[0]}function B(b,c){var d,e,f,g,h,i,j,l=new Uint32Array(a,c,3*b);for(d=0;d<b;d++)e=l[3*d],f=l[3*d+1],g=l[3*d+2],h=K[2*e],e=K[2*e+1],i=K[2*f],j=K[2*f+1],f=K[2*g],g=K[2*g+1],R.faceVertexUvs[0].push([new THREE.UV(h,e),new THREE.UV(i,j),new THREE.UV(f,g)])}function x(b,
c){var d,e,f,g,h,i,j,l,k,m=new Uint32Array(a,c,4*b);for(d=0;d<b;d++)e=m[4*d],f=m[4*d+1],g=m[4*d+2],h=m[4*d+3],i=K[2*e],e=K[2*e+1],j=K[2*f],l=K[2*f+1],f=K[2*g],k=K[2*g+1],g=K[2*h],h=K[2*h+1],R.faceVertexUvs[0].push([new THREE.UV(i,e),new THREE.UV(j,l),new THREE.UV(f,k),new THREE.UV(g,h)])}function z(b,c,d){for(var e,f,g,h,c=new Uint32Array(a,c,3*b),i=new Uint16Array(a,d,b),d=0;d<b;d++)e=c[3*d],f=c[3*d+1],g=c[3*d+2],h=i[d],R.faces.push(new THREE.Face3(e,f,g,null,null,h))}function D(b,c,d){for(var e,
f,g,h,i,c=new Uint32Array(a,c,4*b),j=new Uint16Array(a,d,b),d=0;d<b;d++)e=c[4*d],f=c[4*d+1],g=c[4*d+2],h=c[4*d+3],i=j[d],R.faces.push(new THREE.Face4(e,f,g,h,null,null,i))}function W(b,c,d,e){for(var f,g,h,i,j,l,k,c=new Uint32Array(a,c,3*b),d=new Uint32Array(a,d,3*b),m=new Uint16Array(a,e,b),e=0;e<b;e++){f=c[3*e];g=c[3*e+1];h=c[3*e+2];j=d[3*e];l=d[3*e+1];k=d[3*e+2];i=m[e];var n=I[3*l],q=I[3*l+1];l=I[3*l+2];var p=I[3*k],o=I[3*k+1];k=I[3*k+2];R.faces.push(new THREE.Face3(f,g,h,[new THREE.Vector3(I[3*
j],I[3*j+1],I[3*j+2]),new THREE.Vector3(n,q,l),new THREE.Vector3(p,o,k)],null,i))}}function u(b,c,d,e){for(var f,g,h,i,j,l,k,m,n,c=new Uint32Array(a,c,4*b),d=new Uint32Array(a,d,4*b),q=new Uint16Array(a,e,b),e=0;e<b;e++){f=c[4*e];g=c[4*e+1];h=c[4*e+2];i=c[4*e+3];l=d[4*e];k=d[4*e+1];m=d[4*e+2];n=d[4*e+3];j=q[e];var p=I[3*k],o=I[3*k+1];k=I[3*k+2];var r=I[3*m],s=I[3*m+1];m=I[3*m+2];var t=I[3*n],u=I[3*n+1];n=I[3*n+2];R.faces.push(new THREE.Face4(f,g,h,i,[new THREE.Vector3(I[3*l],I[3*l+1],I[3*l+2]),new THREE.Vector3(p,
o,k),new THREE.Vector3(r,s,m),new THREE.Vector3(t,u,n)],null,j))}}var R=this,G=0,I=[],K=[],S,F,X;THREE.Geometry.call(this);s=a;F=G;Q=new Uint8Array(s,F,12);p="";for(r=0;12>r;r++)p+=String.fromCharCode(Q[F+r]);b=J(s,F+12);J(s,F+13);J(s,F+14);J(s,F+15);c=J(s,F+16);d=J(s,F+17);e=J(s,F+18);j=J(s,F+19);l=t(s,F+20);m=t(s,F+20+4);k=t(s,F+20+8);n=t(s,F+20+12);p=t(s,F+20+16);q=t(s,F+20+20);o=t(s,F+20+24);r=t(s,F+20+28);Q=t(s,F+20+32);v=t(s,F+20+36);s=t(s,F+20+40);G+=b;F=3*c+j;X=4*c+j;S=n*F;b=p*(F+3*d);c=q*
(F+3*e);j=o*(F+3*d+3*e);F=r*X;d=Q*(X+4*d);e=v*(X+4*e);X=G;var G=new Float32Array(a,G,3*l),w,ea,P,L;for(w=0;w<l;w++)ea=G[3*w],P=G[3*w+1],L=G[3*w+2],R.vertices.push(new THREE.Vector3(ea,P,L));l=G=X+3*l*Float32Array.BYTES_PER_ELEMENT;if(m){G=new Int8Array(a,G,3*m);for(X=0;X<m;X++)w=G[3*X],ea=G[3*X+1],P=G[3*X+2],I.push(w/127,ea/127,P/127)}G=l+3*m*Int8Array.BYTES_PER_ELEMENT;m=G+=C(3*m);if(k){l=new Float32Array(a,G,2*k);for(G=0;G<k;G++)X=l[2*G],w=l[2*G+1],K.push(X,w)}k=G=m+2*k*Float32Array.BYTES_PER_ELEMENT;
S=k+S+C(2*n);m=S+b+C(2*p);b=m+c+C(2*q);c=b+j+C(2*o);F=c+F+C(2*r);j=F+d+C(2*Q);d=j+e+C(2*v);q&&(e=m+3*q*Uint32Array.BYTES_PER_ELEMENT,z(q,m,e+3*q*Uint32Array.BYTES_PER_ELEMENT),B(q,e));o&&(q=b+3*o*Uint32Array.BYTES_PER_ELEMENT,e=q+3*o*Uint32Array.BYTES_PER_ELEMENT,W(o,b,q,e+3*o*Uint32Array.BYTES_PER_ELEMENT),B(o,e));v&&(o=j+4*v*Uint32Array.BYTES_PER_ELEMENT,D(v,j,o+4*v*Uint32Array.BYTES_PER_ELEMENT),x(v,o));s&&(v=d+4*s*Uint32Array.BYTES_PER_ELEMENT,o=v+4*s*Uint32Array.BYTES_PER_ELEMENT,u(s,d,v,o+4*
s*Uint32Array.BYTES_PER_ELEMENT),x(s,o));n&&z(n,k,k+3*n*Uint32Array.BYTES_PER_ELEMENT);p&&(n=S+3*p*Uint32Array.BYTES_PER_ELEMENT,W(p,S,n,n+3*p*Uint32Array.BYTES_PER_ELEMENT));r&&D(r,c,c+4*r*Uint32Array.BYTES_PER_ELEMENT);Q&&(p=F+4*Q*Uint32Array.BYTES_PER_ELEMENT,u(Q,F,p,p+4*Q*Uint32Array.BYTES_PER_ELEMENT));this.computeCentroids();this.computeFaceNormals()};e.prototype=Object.create(THREE.Geometry.prototype);e=new e(c);c=this.initMaterials(d,c);this.needsTangents(c)&&e.computeTangents();b(e,c)};
THREE.ImageLoader=function(){THREE.EventTarget.call(this);this.crossOrigin=null};THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b){var c=this;void 0===b&&(b=new Image);b.addEventListener("load",function(){c.dispatchEvent({type:"load",content:b})},!1);b.addEventListener("error",function(){c.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},!1);c.crossOrigin&&(b.crossOrigin=c.crossOrigin);b.src=a}};
THREE.JSONLoader=function(a){THREE.Loader.call(this,a);this.withCredentials=!1};THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype);THREE.JSONLoader.prototype.load=function(a,b,c){c=c&&"string"===typeof c?c:this.extractUrlBase(a);this.onLoadStart();this.loadAjaxJSON(this,a,b,c)};
THREE.JSONLoader.prototype.loadAjaxJSON=function(a,b,c,d,e){var f=new XMLHttpRequest,g=0;f.withCredentials=this.withCredentials;f.onreadystatechange=function(){if(f.readyState===f.DONE)if(200===f.status||0===f.status){if(f.responseText){var i=JSON.parse(f.responseText);a.createModel(i,c,d)}else console.warn("THREE.JSONLoader: ["+b+"] seems to be unreachable or file there is empty");a.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load ["+b+"] ["+f.status+"]");else f.readyState===
f.LOADING?e&&(0===g&&(g=f.getResponseHeader("Content-Length")),e({total:g,loaded:f.responseText.length})):f.readyState===f.HEADERS_RECEIVED&&(g=f.getResponseHeader("Content-Length"))};f.open("GET",b,!0);f.send(null)};
THREE.JSONLoader.prototype.createModel=function(a,b,c){var d=new THREE.Geometry,e=void 0!==a.scale?1/a.scale:1,f,g,i,h,j,l,m,k,n,p,q,o,r,Q,v,s=a.faces;p=a.vertices;var C=a.normals,J=a.colors,t=0;for(f=0;f<a.uvs.length;f++)a.uvs[f].length&&t++;for(f=0;f<t;f++)d.faceUvs[f]=[],d.faceVertexUvs[f]=[];h=0;for(j=p.length;h<j;)l=new THREE.Vector3,l.x=p[h++]*e,l.y=p[h++]*e,l.z=p[h++]*e,d.vertices.push(l);h=0;for(j=s.length;h<j;){p=s[h++];l=p&1;i=p&2;f=p&4;g=p&8;k=p&16;m=p&32;q=p&64;p&=128;l?(o=new THREE.Face4,
o.a=s[h++],o.b=s[h++],o.c=s[h++],o.d=s[h++],l=4):(o=new THREE.Face3,o.a=s[h++],o.b=s[h++],o.c=s[h++],l=3);i&&(i=s[h++],o.materialIndex=i);i=d.faces.length;if(f)for(f=0;f<t;f++)r=a.uvs[f],n=s[h++],v=r[2*n],n=r[2*n+1],d.faceUvs[f][i]=new THREE.UV(v,n);if(g)for(f=0;f<t;f++){r=a.uvs[f];Q=[];for(g=0;g<l;g++)n=s[h++],v=r[2*n],n=r[2*n+1],Q[g]=new THREE.UV(v,n);d.faceVertexUvs[f][i]=Q}k&&(k=3*s[h++],g=new THREE.Vector3,g.x=C[k++],g.y=C[k++],g.z=C[k],o.normal=g);if(m)for(f=0;f<l;f++)k=3*s[h++],g=new THREE.Vector3,
g.x=C[k++],g.y=C[k++],g.z=C[k],o.vertexNormals.push(g);q&&(m=s[h++],m=new THREE.Color(J[m]),o.color=m);if(p)for(f=0;f<l;f++)m=s[h++],m=new THREE.Color(J[m]),o.vertexColors.push(m);d.faces.push(o)}if(a.skinWeights){h=0;for(j=a.skinWeights.length;h<j;h+=2)s=a.skinWeights[h],C=a.skinWeights[h+1],d.skinWeights.push(new THREE.Vector4(s,C,0,0))}if(a.skinIndices){h=0;for(j=a.skinIndices.length;h<j;h+=2)s=a.skinIndices[h],C=a.skinIndices[h+1],d.skinIndices.push(new THREE.Vector4(s,C,0,0))}d.bones=a.bones;
d.animation=a.animation;if(void 0!==a.morphTargets){h=0;for(j=a.morphTargets.length;h<j;h++){d.morphTargets[h]={};d.morphTargets[h].name=a.morphTargets[h].name;d.morphTargets[h].vertices=[];J=d.morphTargets[h].vertices;t=a.morphTargets[h].vertices;s=0;for(C=t.length;s<C;s+=3)p=new THREE.Vector3,p.x=t[s]*e,p.y=t[s+1]*e,p.z=t[s+2]*e,J.push(p)}}if(void 0!==a.morphColors){h=0;for(j=a.morphColors.length;h<j;h++){d.morphColors[h]={};d.morphColors[h].name=a.morphColors[h].name;d.morphColors[h].colors=[];
C=d.morphColors[h].colors;J=a.morphColors[h].colors;e=0;for(s=J.length;e<s;e+=3)t=new THREE.Color(16755200),t.setRGB(J[e],J[e+1],J[e+2]),C.push(t)}}d.computeCentroids();d.computeFaceNormals();a=this.initMaterials(a.materials,c);this.needsTangents(a)&&d.computeTangents();b(d,a)};
THREE.SceneLoader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){};this.callbackSync=function(){};this.callbackProgress=function(){};this.geometryHandlerMap={};this.hierarchyHandlerMap={};this.addGeometryHandler("ascii",THREE.JSONLoader);this.addGeometryHandler("binary",THREE.BinaryLoader)};THREE.SceneLoader.prototype.constructor=THREE.SceneLoader;
THREE.SceneLoader.prototype.load=function(a,b){var c=this,d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState)if(200===d.status||0===d.status){var e=JSON.parse(d.responseText);c.parse(e,b,a)}else console.error("THREE.SceneLoader: Couldn't load ["+a+"] ["+d.status+"]")};d.open("GET",a,!0);d.send(null)};THREE.SceneLoader.prototype.addGeometryHandler=function(a,b){this.geometryHandlerMap[a]={loaderClass:b}};
THREE.SceneLoader.prototype.addHierarchyHandler=function(a,b){this.hierarchyHandlerMap[a]={loaderClass:b}};
THREE.SceneLoader.prototype.parse=function(a,b,c){function d(a,b){return"relativeToHTML"==b?a:m+"/"+a}function e(){f(w.scene,P.objects)}function f(a,b){for(var c in b)if(void 0===w.objects[c]){var e=b[c],g=null;if(e.type&&e.type in l.hierarchyHandlerMap&&void 0===e.loading){var h={},j;for(j in o)"type"!==j&&"url"!==j&&(h[j]=o[j]);z=w.materials[e.material];e.loading=!0;var k=l.hierarchyHandlerMap[e.type].loaderObject;k.addEventListener?(k.addEventListener("load",i(c,a,z,e)),k.load(d(e.url,P.urlBaseType))):
k.options?k.load(d(e.url,P.urlBaseType),i(c,a,z,e)):k.load(d(e.url,P.urlBaseType),i(c,a,z,e),h)}else if(void 0!==e.geometry){if(x=w.geometries[e.geometry]){g=!1;z=w.materials[e.material];g=z instanceof THREE.ShaderMaterial;v=e.position;s=e.rotation;C=e.quaternion;J=e.scale;r=e.matrix;C=0;e.material||(z=new THREE.MeshFaceMaterial(w.face_materials[e.geometry]));z instanceof THREE.MeshFaceMaterial&&0===z.materials.length&&(z=new THREE.MeshFaceMaterial(w.face_materials[e.geometry]));if(z instanceof THREE.MeshFaceMaterial)for(h=
0;h<z.materials.length;h++)g=g||z.materials[h]instanceof THREE.ShaderMaterial;g&&x.computeTangents();e.skin?g=new THREE.SkinnedMesh(x,z):e.morph?(g=new THREE.MorphAnimMesh(x,z),void 0!==e.duration&&(g.duration=e.duration),void 0!==e.time&&(g.time=e.time),void 0!==e.mirroredLoop&&(g.mirroredLoop=e.mirroredLoop),z.morphNormals&&x.computeMorphNormals()):g=new THREE.Mesh(x,z);g.name=c;r?(g.matrixAutoUpdate=!1,g.matrix.set(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],
r[15])):(g.position.set(v[0],v[1],v[2]),C?(g.quaternion.set(C[0],C[1],C[2],C[3]),g.useQuaternion=!0):g.rotation.set(s[0],s[1],s[2]),g.scale.set(J[0],J[1],J[2]));g.visible=e.visible;g.castShadow=e.castShadow;g.receiveShadow=e.receiveShadow;a.add(g);w.objects[c]=g}}else"DirectionalLight"===e.type||"PointLight"===e.type||"AmbientLight"===e.type?(G=void 0!==e.color?e.color:16777215,I=void 0!==e.intensity?e.intensity:1,"DirectionalLight"===e.type?(v=e.direction,R=new THREE.DirectionalLight(G,I),R.position.set(v[0],
v[1],v[2]),e.target&&(ea.push({object:R,targetName:e.target}),R.target=null)):"PointLight"===e.type?(v=e.position,Q=e.distance,R=new THREE.PointLight(G,I,Q),R.position.set(v[0],v[1],v[2])):"AmbientLight"===e.type&&(R=new THREE.AmbientLight(G)),a.add(R),R.name=c,w.lights[c]=R,w.objects[c]=R):"PerspectiveCamera"===e.type||"OrthographicCamera"===e.type?("PerspectiveCamera"===e.type?D=new THREE.PerspectiveCamera(e.fov,e.aspect,e.near,e.far):"OrthographicCamera"===e.type&&(D=new THREE.OrthographicCamera(t.left,
t.right,t.top,t.bottom,t.near,t.far)),v=e.position,D.position.set(v[0],v[1],v[2]),a.add(D),D.name=c,w.cameras[c]=D,w.objects[c]=D):(v=e.position,s=e.rotation,C=e.quaternion,J=e.scale,C=0,g=new THREE.Object3D,g.name=c,g.position.set(v[0],v[1],v[2]),C?(g.quaternion.set(C[0],C[1],C[2],C[3]),g.useQuaternion=!0):g.rotation.set(s[0],s[1],s[2]),g.scale.set(J[0],J[1],J[2]),g.visible=void 0!==e.visible?e.visible:!1,a.add(g),w.objects[c]=g,w.empties[c]=g);if(g){if(void 0!==e.properties)for(var m in e.properties)g.properties[m]=
e.properties[m];void 0!==e.children&&f(g,e.children)}}}function g(a){return function(b,c){w.geometries[a]=b;w.face_materials[a]=c;e();K-=1;l.onLoadComplete();j()}}function i(a,b,c,d){return function(f){var f=f.content?f.content:f.dae?f.scene:f,g=d.position,h=d.rotation,i=d.quaternion,k=d.scale;f.position.set(g[0],g[1],g[2]);i?(f.quaternion.set(i[0],i[1],i[2],i[3]),f.useQuaternion=!0):f.rotation.set(h[0],h[1],h[2]);f.scale.set(k[0],k[1],k[2]);c&&f.traverse(function(a){a.material=c});b.add(f);w.objects[a]=
f;e();K-=1;l.onLoadComplete();j()}}function h(a){return function(b,c){w.geometries[a]=b;w.face_materials[a]=c}}function j(){l.callbackProgress({totalModels:F,totalTextures:X,loadedModels:F-K,loadedTextures:X-S},w);l.onLoadProgress();if(0===K&&0===S){for(var a=0;a<ea.length;a++){var c=ea[a],d=w.objects[c.targetName];d?c.object.target=d:(c.object.target=new THREE.Object3D,w.scene.add(c.object.target));c.object.target.properties.targetInverse=c.object}b(w)}}var l=this,m=THREE.Loader.prototype.extractUrlBase(c),
k,n,p,q,o,r,Q,v,s,C,J,t,B,x,z,D,W,u,R,G,I,K,S,F,X,w,ea=[],P=a,L;for(L in this.geometryHandlerMap)a=this.geometryHandlerMap[L].loaderClass,this.geometryHandlerMap[L].loaderObject=new a;for(L in this.hierarchyHandlerMap)a=this.hierarchyHandlerMap[L].loaderClass,this.hierarchyHandlerMap[L].loaderObject=new a;S=K=0;w={scene:new THREE.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{}};if(P.transform&&(L=P.transform.position,a=P.transform.rotation,
c=P.transform.scale,L&&w.scene.position.set(L[0],L[1],L[2]),a&&w.scene.rotation.set(a[0],a[1],a[2]),c&&w.scene.scale.set(c[0],c[1],c[2]),L||a||c))w.scene.updateMatrix(),w.scene.updateMatrixWorld();L=function(a){return function(){S-=a;j();l.onLoadComplete()}};for(p in P.fogs)a=P.fogs[p],"linear"===a.type?W=new THREE.Fog(0,a.near,a.far):"exp2"===a.type&&(W=new THREE.FogExp2(0,a.density)),t=a.color,W.color.setRGB(t[0],t[1],t[2]),w.fogs[p]=W;for(k in P.geometries)o=P.geometries[k],o.type in this.geometryHandlerMap&&
(K+=1,l.onLoadStart());for(var Y in P.objects)p=P.objects[Y],p.type&&p.type in this.hierarchyHandlerMap&&(K+=1,l.onLoadStart());F=K;for(k in P.geometries)if(o=P.geometries[k],"cube"===o.type)x=new THREE.CubeGeometry(o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments),w.geometries[k]=x;else if("plane"===o.type)x=new THREE.PlaneGeometry(o.width,o.height,o.widthSegments,o.heightSegments),w.geometries[k]=x;else if("sphere"===o.type)x=new THREE.SphereGeometry(o.radius,o.widthSegments,
o.heightSegments),w.geometries[k]=x;else if("cylinder"===o.type)x=new THREE.CylinderGeometry(o.topRad,o.botRad,o.height,o.radSegs,o.heightSegs),w.geometries[k]=x;else if("torus"===o.type)x=new THREE.TorusGeometry(o.radius,o.tube,o.segmentsR,o.segmentsT),w.geometries[k]=x;else if("icosahedron"===o.type)x=new THREE.IcosahedronGeometry(o.radius,o.subdivisions),w.geometries[k]=x;else if(o.type in this.geometryHandlerMap){Y={};for(u in o)"type"!==u&&"url"!==u&&(Y[u]=o[u]);this.geometryHandlerMap[o.type].loaderObject.load(d(o.url,
P.urlBaseType),g(k),Y)}else"embedded"===o.type&&(Y=P.embeds[o.id],Y.metadata=P.metadata,Y&&this.geometryHandlerMap.ascii.loaderObject.createModel(Y,h(k),""));for(q in P.textures)if(k=P.textures[q],k.url instanceof Array){S+=k.url.length;for(u=0;u<k.url.length;u++)l.onLoadStart()}else S+=1,l.onLoadStart();X=S;for(q in P.textures){k=P.textures[q];void 0!==k.mapping&&void 0!==THREE[k.mapping]&&(k.mapping=new THREE[k.mapping]);if(k.url instanceof Array){Y=k.url.length;p=[];for(u=0;u<Y;u++)p[u]=d(k.url[u],
P.urlBaseType);u=(u=p[0].endsWith(".dds"))?THREE.ImageUtils.loadCompressedTextureCube(p,k.mapping,L(Y)):THREE.ImageUtils.loadTextureCube(p,k.mapping,L(Y))}else{u=k.url.toLowerCase().endsWith(".dds");Y=d(k.url,P.urlBaseType);p=L(1);u=u?THREE.ImageUtils.loadCompressedTexture(Y,k.mapping,p):THREE.ImageUtils.loadTexture(Y,k.mapping,p);void 0!==THREE[k.minFilter]&&(u.minFilter=THREE[k.minFilter]);void 0!==THREE[k.magFilter]&&(u.magFilter=THREE[k.magFilter]);k.anisotropy&&(u.anisotropy=k.anisotropy);if(k.repeat&&
(u.repeat.set(k.repeat[0],k.repeat[1]),1!==k.repeat[0]&&(u.wrapS=THREE.RepeatWrapping),1!==k.repeat[1]))u.wrapT=THREE.RepeatWrapping;k.offset&&u.offset.set(k.offset[0],k.offset[1]);if(k.wrap&&(Y={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==Y[k.wrap[0]]&&(u.wrapS=Y[k.wrap[0]]),void 0!==Y[k.wrap[1]]))u.wrapT=Y[k.wrap[1]]}w.textures[q]=u}for(n in P.materials){r=P.materials[n];for(B in r.parameters)"envMap"===B||"map"===B||"lightMap"===B||"bumpMap"===B?r.parameters[B]=w.textures[r.parameters[B]]:
"shading"===B?r.parameters[B]="flat"===r.parameters[B]?THREE.FlatShading:THREE.SmoothShading:"side"===B?r.parameters[B]="double"==r.parameters[B]?THREE.DoubleSide:"back"==r.parameters[B]?THREE.BackSide:THREE.FrontSide:"blending"===B?r.parameters[B]=r.parameters[B]in THREE?THREE[r.parameters[B]]:THREE.NormalBlending:"combine"===B?r.parameters[B]="MixOperation"==r.parameters[B]?THREE.MixOperation:THREE.MultiplyOperation:"vertexColors"===B?"face"==r.parameters[B]?r.parameters[B]=THREE.FaceColors:r.parameters[B]&&
(r.parameters[B]=THREE.VertexColors):"wrapRGB"===B&&(q=r.parameters[B],r.parameters[B]=new THREE.Vector3(q[0],q[1],q[2]));void 0!==r.parameters.opacity&&1>r.parameters.opacity&&(r.parameters.transparent=!0);r.parameters.normalMap?(q=THREE.ShaderUtils.lib.normal,L=THREE.UniformsUtils.clone(q.uniforms),k=r.parameters.color,u=r.parameters.specular,Y=r.parameters.ambient,p=r.parameters.shininess,L.tNormal.value=w.textures[r.parameters.normalMap],r.parameters.normalScale&&L.uNormalScale.value.set(r.parameters.normalScale[0],
r.parameters.normalScale[1]),r.parameters.map&&(L.tDiffuse.value=r.parameters.map,L.enableDiffuse.value=!0),r.parameters.envMap&&(L.tCube.value=r.parameters.envMap,L.enableReflection.value=!0,L.uReflectivity.value=r.parameters.reflectivity),r.parameters.lightMap&&(L.tAO.value=r.parameters.lightMap,L.enableAO.value=!0),r.parameters.specularMap&&(L.tSpecular.value=w.textures[r.parameters.specularMap],L.enableSpecular.value=!0),r.parameters.displacementMap&&(L.tDisplacement.value=w.textures[r.parameters.displacementMap],
L.enableDisplacement.value=!0,L.uDisplacementBias.value=r.parameters.displacementBias,L.uDisplacementScale.value=r.parameters.displacementScale),L.uDiffuseColor.value.setHex(k),L.uSpecularColor.value.setHex(u),L.uAmbientColor.value.setHex(Y),L.uShininess.value=p,r.parameters.opacity&&(L.uOpacity.value=r.parameters.opacity),z=new THREE.ShaderMaterial({fragmentShader:q.fragmentShader,vertexShader:q.vertexShader,uniforms:L,lights:!0,fog:!0})):z=new THREE[r.type](r.parameters);w.materials[n]=z}for(n in P.materials)if(r=
P.materials[n],r.parameters.materials){B=[];for(u=0;u<r.parameters.materials.length;u++)B.push(w.materials[r.parameters.materials[u]]);w.materials[n].materials=B}e();w.cameras&&P.defaults.camera&&(w.currentCamera=w.cameras[P.defaults.camera]);w.fogs&&P.defaults.fog&&(w.scene.fog=w.fogs[P.defaults.fog]);t=P.defaults.bgcolor;w.bgColor=new THREE.Color;w.bgColor.setRGB(t[0],t[1],t[2]);w.bgColorAlpha=P.defaults.bgalpha;l.callbackSync(w);j()};
THREE.TextureLoader=function(){THREE.EventTarget.call(this);this.crossOrigin=null};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a){var b=this,c=new Image;c.addEventListener("load",function(){var a=new THREE.Texture(c);a.needsUpdate=!0;b.dispatchEvent({type:"load",content:a})},!1);c.addEventListener("error",function(){b.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},!1);b.crossOrigin&&(c.crossOrigin=b.crossOrigin);c.src=a}};
THREE.Material=function(){THREE.MaterialLibrary.push(this);this.id=THREE.MaterialIdCount++;this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.overdraw=!1;this.needsUpdate=this.visible=!0};
THREE.Material.prototype.setValues=function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var d=this[b];d instanceof THREE.Color&&c instanceof THREE.Color?d.copy(c):d instanceof THREE.Color&&"number"===typeof c?d.setHex(c):d instanceof THREE.Vector3&&c instanceof THREE.Vector3?d.copy(c):this[b]=c}}};
THREE.Material.prototype.clone=function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;
a.visible=this.visible;return a};THREE.Material.prototype.deallocate=function(){var a=THREE.MaterialLibrary.indexOf(this);-1!==a&&THREE.MaterialLibrary.splice(a,1)};THREE.MaterialIdCount=0;THREE.MaterialLibrary=[];THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=
this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;
a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=!1;this.perPixel=!0;this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;
this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.perPixel=this.perPixel;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){return new THREE.MeshFaceMaterial(this.materials.slice(0))};THREE.ParticleBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.ParticleBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ParticleBasicMaterial.prototype.clone=function(){var a=new THREE.ParticleBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ParticleCanvasMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.program=function(){};this.setValues(a)};THREE.ParticleCanvasMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ParticleCanvasMaterial.prototype.clone=function(){var a=new THREE.ParticleCanvasMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.program=this.program;return a};
THREE.Texture=function(a,b,c,d,e,f,g,i,h){THREE.TextureLibrary.push(this);this.id=THREE.TextureIdCount++;this.name="";this.image=a;this.mapping=void 0!==b?b:new THREE.UVMapping;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==e?e:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==h?h:1;this.format=void 0!==g?g:THREE.RGBAFormat;this.type=void 0!==i?i:THREE.UnsignedByteType;
this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.needsUpdate=!1;this.onUpdate=null};
THREE.Texture.prototype={constructor:THREE.Texture,clone:function(){var a=new THREE.Texture;a.image=this.image;a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;return a},deallocate:function(){var a=THREE.TextureLibrary.indexOf(this);
-1!==a&&THREE.TextureLibrary.splice(a,1)}};THREE.TextureIdCount=0;THREE.TextureLibrary=[];THREE.DataTexture=function(a,b,c,d,e,f,g,i,h,j){THREE.Texture.call(this,null,f,g,i,h,j,d,e);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture(this.image.data,this.image.width,this.image.height,this.format,this.type,this.mapping,this.wrapS,this.wrapT,this.magFilter,this.minFilter);a.offset.copy(this.offset);a.repeat.copy(this.repeat);return a};THREE.Particle=function(a){THREE.Object3D.call(this);this.material=a};THREE.Particle.prototype=Object.create(THREE.Object3D.prototype);
THREE.Particle.prototype.clone=function(a){void 0===a&&(a=new THREE.Particle(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=a;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip;this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere())};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);
THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};
THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.geometry=a;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0});if(this.geometry&&(null===this.geometry.boundingSphere&&this.geometry.computeBoundingSphere(),this.boundRadius=a.boundingSphere.radius,this.geometry.morphTargets.length)){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var c=0;c<this.geometry.morphTargets.length;c++)this.morphTargetInfluences.push(0),
this.morphTargetDictionary[this.geometry.morphTargets[c].name]=c}};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};
THREE.Mesh.prototype.clone=function(a){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.skinMatrix=new THREE.Matrix4};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);
THREE.Bone.prototype.update=function(a,b){this.matrixAutoUpdate&&(b|=this.updateMatrix());if(b||this.matrixWorldNeedsUpdate)a?this.skinMatrix.multiply(a,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;var c,d=this.children.length;for(c=0;c<d;c++)this.children[c].update(this.skinMatrix,b)};
THREE.Sprite=function(a){THREE.Object3D.call(this);a=a||{};this.color=void 0!==a.color?new THREE.Color(a.color):new THREE.Color(16777215);this.map=void 0!==a.map?a.map:new THREE.Texture;this.blending=void 0!==a.blending?a.blending:THREE.NormalBlending;this.blendSrc=void 0!==a.blendSrc?a.blendSrc:THREE.SrcAlphaFactor;this.blendDst=void 0!==a.blendDst?a.blendDst:THREE.OneMinusSrcAlphaFactor;this.blendEquation=void 0!==a.blendEquation?a.blendEquation:THREE.AddEquation;this.useScreenCoordinates=void 0!==
a.useScreenCoordinates?a.useScreenCoordinates:!0;this.mergeWith3D=void 0!==a.mergeWith3D?a.mergeWith3D:!this.useScreenCoordinates;this.affectedByDistance=void 0!==a.affectedByDistance?a.affectedByDistance:!this.useScreenCoordinates;this.scaleByViewport=void 0!==a.scaleByViewport?a.scaleByViewport:!this.affectedByDistance;this.alignment=a.alignment instanceof THREE.Vector2?a.alignment:THREE.SpriteAlignment.center.clone();this.fog=void 0!==a.fog?a.fog:!1;this.rotation3d=this.rotation;this.rotation=
0;this.opacity=1;this.uvOffset=new THREE.Vector2(0,0);this.uvScale=new THREE.Vector2(1,1)};THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position);this.rotation3d.set(0,0,this.rotation);this.matrix.setRotationFromEuler(this.rotation3d);if(1!==this.scale.x||1!==this.scale.y)this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,this.scale.y);this.matrixWorldNeedsUpdate=!0};
THREE.Sprite.prototype.clone=function(a){void 0===a&&(a=new THREE.Sprite({}));a.color.copy(this.color);a.map=this.map;a.blending=this.blending;a.useScreenCoordinates=this.useScreenCoordinates;a.mergeWith3D=this.mergeWith3D;a.affectedByDistance=this.affectedByDistance;a.scaleByViewport=this.scaleByViewport;a.alignment=this.alignment;a.fog=this.fog;a.rotation3d.copy(this.rotation3d);a.rotation=this.rotation;a.opacity=this.opacity;a.uvOffset.copy(this.uvOffset);a.uvScale.copy(this.uvScale);THREE.Object3D.prototype.clone.call(this,
a);return a};THREE.SpriteAlignment={};THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1);THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1);THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1);THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0);THREE.SpriteAlignment.center=new THREE.Vector2(0,0);THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0);THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1);THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1);
THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1);THREE.Scene=function(){THREE.Object3D.call(this);this.overrideMaterial=this.fog=null;this.matrixAutoUpdate=!1;this.__objects=[];this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)&&-1===this.__objects.indexOf(a)){this.__objects.push(a);this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1)}else a instanceof THREE.Camera||(b=this.__objects.indexOf(a),-1!==b&&(this.__objects.splice(b,1),this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1)));for(b=0;b<a.children.length;b++)this.__removeObject(a.children[b])};
THREE.CanvasRenderer=function(a){function b(a){Q!==a&&(Q=q.globalAlpha=a)}function c(a){v!==a&&(a===THREE.NormalBlending?q.globalCompositeOperation="source-over":a===THREE.AdditiveBlending?q.globalCompositeOperation="lighter":a===THREE.SubtractiveBlending&&(q.globalCompositeOperation="darker"),v=a)}function d(a){s!==a&&(s=q.strokeStyle=a)}function e(a){C!==a&&(C=q.fillStyle=a)}var a=a||{},f=this,g,i,h,j=new THREE.Projector,l=void 0!==a.canvas?a.canvas:
document.createElement("canvas"),m,k,n,p,q=l.getContext("2d"),o=new THREE.Color(0),r=0,Q=1,v=0,s=null,C=null,J=null,t=null,B=null,x,z,D,W,u=new THREE.RenderableVertex,R=new THREE.RenderableVertex,G,I,K,S,F,X,w,ea,P,L,Y,ma,y=new THREE.Color,N=new THREE.Color,O=new THREE.Color,A=new THREE.Color,V=new THREE.Color,H=new THREE.Color,M=new THREE.Color,$={},ia={},fa,ga,Z,pa,za,ta,Aa,Ba,La,Ma,qa=new THREE.Rectangle,ha=new THREE.Rectangle,ba=new THREE.Rectangle,Fa=!1,ca=new THREE.Color,ua=new THREE.Color,
va=new THREE.Color,aa=new THREE.Vector3,Ca,Da,Ja,ja,Ea,Ga,a=16;Ca=document.createElement("canvas");Ca.width=Ca.height=2;Da=Ca.getContext("2d");Da.fillStyle="rgba(0,0,0,1)";Da.fillRect(0,0,2,2);Ja=Da.getImageData(0,0,2,2);ja=Ja.data;Ea=document.createElement("canvas");Ea.width=Ea.height=a;Ga=Ea.getContext("2d");Ga.translate(-a/2,-a/2);Ga.scale(a,a);a--;this.domElement=l;this.sortElements=this.sortObjects=this.autoClear=!0;this.info={render:{vertices:0,faces:0}};this.setSize=function(a,b){m=a;k=b;n=
Math.floor(m/2);p=Math.floor(k/2);l.width=m;l.height=k;qa.set(-n,-p,n,p);ha.set(-n,-p,n,p);Q=1;v=0;B=t=J=C=s=null};this.setClearColor=function(a,b){o.copy(a);r=void 0!==b?b:1;ha.set(-n,-p,n,p)};this.setClearColorHex=function(a,b){o.setHex(a);r=void 0!==b?b:1;ha.set(-n,-p,n,p)};this.getMaxAnisotropy=function(){return 0};this.clear=function(){q.setTransform(1,0,0,-1,n,p);!1===ha.isEmpty()&&(ha.minSelf(qa),ha.inflate(2),1>r&&q.clearRect(Math.floor(ha.getX()),Math.floor(ha.getY()),Math.floor(ha.getWidth()),
Math.floor(ha.getHeight())),0<r&&(c(THREE.NormalBlending),b(1),e("rgba("+Math.floor(255*o.r)+","+Math.floor(255*o.g)+","+Math.floor(255*o.b)+","+r+")"),q.fillRect(Math.floor(ha.getX()),Math.floor(ha.getY()),Math.floor(ha.getWidth()),Math.floor(ha.getHeight()))),ha.empty())};this.render=function(a,l){function k(a,b,c){for(var d=0,e=h.length;d<e;d++){var f=h[d],g=f.color;if(f instanceof THREE.DirectionalLight){var i=f.matrixWorld.getPosition().normalize(),j=b.dot(i);0>=j||(j*=f.intensity,c.r+=g.r*j,
c.g+=g.g*j,c.b+=g.b*j)}else f instanceof THREE.PointLight&&(i=f.matrixWorld.getPosition(),j=b.dot(aa.sub(i,a).normalize()),0>=j||(j*=0==f.distance?1:1-Math.min(a.distanceTo(i)/f.distance,1),0!=j&&(j*=f.intensity,c.r+=g.r*j,c.g+=g.g*j,c.b+=g.b*j)))}}function m(a,d,e,g,h,i,j,n){f.info.render.vertices+=3;f.info.render.faces++;b(n.opacity);c(n.blending);G=a.positionScreen.x;I=a.positionScreen.y;K=d.positionScreen.x;S=d.positionScreen.y;F=e.positionScreen.x;X=e.positionScreen.y;o(G,I,K,S,F,X);(n instanceof
THREE.MeshLambertMaterial||n instanceof THREE.MeshPhongMaterial)&&null===n.map&&null===n.map?(H.copy(n.color),M.copy(n.emissive),n.vertexColors===THREE.FaceColors&&(H.r*=j.color.r,H.g*=j.color.g,H.b*=j.color.b),!0===Fa)?!1===n.wireframe&&n.shading==THREE.SmoothShading&&3==j.vertexNormalsLength?(N.r=O.r=A.r=ca.r,N.g=O.g=A.g=ca.g,N.b=O.b=A.b=ca.b,k(j.v1.positionWorld,j.vertexNormalsWorld[0],N),k(j.v2.positionWorld,j.vertexNormalsWorld[1],O),k(j.v3.positionWorld,j.vertexNormalsWorld[2],A),N.r=N.r*H.r+
M.r,N.g=N.g*H.g+M.g,N.b=N.b*H.b+M.b,O.r=O.r*H.r+M.r,O.g=O.g*H.g+M.g,O.b=O.b*H.b+M.b,A.r=A.r*H.r+M.r,A.g=A.g*H.g+M.g,A.b=A.b*H.b+M.b,V.r=0.5*(O.r+A.r),V.g=0.5*(O.g+A.g),V.b=0.5*(O.b+A.b),Z=Ha(N,O,A,V),Q(G,I,K,S,F,X,0,0,1,0,0,1,Z)):(y.r=ca.r,y.g=ca.g,y.b=ca.b,k(j.centroidWorld,j.normalWorld,y),y.r=y.r*H.r+M.r,y.g=y.g*H.g+M.g,y.b=y.b*H.b+M.b,!0===n.wireframe?s(y,n.wireframeLinewidth,n.wireframeLinecap,n.wireframeLinejoin):v(y)):!0===n.wireframe?s(n.color,n.wireframeLinewidth,n.wireframeLinecap,n.wireframeLinejoin):
v(n.color):n instanceof THREE.MeshBasicMaterial||n instanceof THREE.MeshLambertMaterial||n instanceof THREE.MeshPhongMaterial?null!==n.map?n.map.mapping instanceof THREE.UVMapping&&(pa=j.uvs[0],C(G,I,K,S,F,X,pa[g].u,pa[g].v,pa[h].u,pa[h].v,pa[i].u,pa[i].v,n.map)):null!==n.envMap?n.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(a=l.matrixWorldInverse,aa.copy(j.vertexNormalsWorld[g]),za=0.5*(aa.x*a.elements[0]+aa.y*a.elements[4]+aa.z*a.elements[8])+0.5,ta=0.5*(aa.x*a.elements[1]+aa.y*
a.elements[5]+aa.z*a.elements[9])+0.5,aa.copy(j.vertexNormalsWorld[h]),Aa=0.5*(aa.x*a.elements[0]+aa.y*a.elements[4]+aa.z*a.elements[8])+0.5,Ba=0.5*(aa.x*a.elements[1]+aa.y*a.elements[5]+aa.z*a.elements[9])+0.5,aa.copy(j.vertexNormalsWorld[i]),La=0.5*(aa.x*a.elements[0]+aa.y*a.elements[4]+aa.z*a.elements[8])+0.5,Ma=0.5*(aa.x*a.elements[1]+aa.y*a.elements[5]+aa.z*a.elements[9])+0.5,C(G,I,K,S,F,X,za,ta,Aa,Ba,La,Ma,n.envMap)):(y.copy(n.color),n.vertexColors===THREE.FaceColors&&(y.r*=j.color.r,y.g*=j.color.g,
y.b*=j.color.b),!0===n.wireframe?s(y,n.wireframeLinewidth,n.wireframeLinecap,n.wireframeLinejoin):v(y)):n instanceof THREE.MeshDepthMaterial?(fa=l.near,ga=l.far,N.r=N.g=N.b=1-wa(a.positionScreen.z,fa,ga),O.r=O.g=O.b=1-wa(d.positionScreen.z,fa,ga),A.r=A.g=A.b=1-wa(e.positionScreen.z,fa,ga),V.r=0.5*(O.r+A.r),V.g=0.5*(O.g+A.g),V.b=0.5*(O.b+A.b),Z=Ha(N,O,A,V),Q(G,I,K,S,F,X,0,0,1,0,0,1,Z)):n instanceof THREE.MeshNormalMaterial&&(y.r=xa(j.normalWorld.x),y.g=xa(j.normalWorld.y),y.b=xa(j.normalWorld.z),!0===
n.wireframe?s(y,n.wireframeLinewidth,n.wireframeLinecap,n.wireframeLinejoin):v(y))}function o(a,b,c,d,e,f){q.beginPath();q.moveTo(a,b);q.lineTo(c,d);q.lineTo(e,f);q.closePath()}function r(a,b,c,d,e,f,g,h){q.beginPath();q.moveTo(a,b);q.lineTo(c,d);q.lineTo(e,f);q.lineTo(g,h);q.closePath()}function s(a,b,c,e){J!==b&&(J=q.lineWidth=b);t!==c&&(t=q.lineCap=c);B!==e&&(B=q.lineJoin=e);d(a.getContextStyle());q.stroke();ba.inflate(2*b)}function v(a){e(a.getContextStyle());q.fill()}function C(a,b,c,d,f,g,h,
i,j,k,l,n,m){if(!(m instanceof THREE.DataTexture||void 0===m.image||0==m.image.width)){if(!0===m.needsUpdate){var o=m.wrapS==THREE.RepeatWrapping,p=m.wrapT==THREE.RepeatWrapping;$[m.id]=q.createPattern(m.image,!0===o&&!0===p?"repeat":!0===o&&!1===p?"repeat-x":!1===o&&!0===p?"repeat-y":"no-repeat");m.needsUpdate=!1}void 0===$[m.id]?e("rgba(0,0,0,1)"):e($[m.id]);var o=m.offset.x/m.repeat.x,p=m.offset.y/m.repeat.y,r=m.image.width*m.repeat.x,s=m.image.height*m.repeat.y,h=(h+o)*r,i=(1-i+p)*s,c=c-a,d=d-
b,f=f-a,g=g-b,j=(j+o)*r-h,k=(1-k+p)*s-i,l=(l+o)*r-h,n=(1-n+p)*s-i,o=j*n-l*k;0===o?(void 0===ia[m.id]&&(b=document.createElement("canvas"),b.width=m.image.width,b.height=m.image.height,b=b.getContext("2d"),b.drawImage(m.image,0,0),ia[m.id]=b.getImageData(0,0,m.image.width,m.image.height).data),b=ia[m.id],h=4*(Math.floor(h)+Math.floor(i)*m.image.width),y.setRGB(b[h]/255,b[h+1]/255,b[h+2]/255),v(y)):(o=1/o,m=(n*c-k*f)*o,k=(n*d-k*g)*o,c=(j*f-l*c)*o,d=(j*g-l*d)*o,a=a-m*h-c*i,h=b-k*h-d*i,q.save(),q.transform(m,
k,c,d,a,h),q.fill(),q.restore())}}function Q(a,b,c,d,e,f,g,h,i,j,k,l,n){var m,o;m=n.width-1;o=n.height-1;g*=m;h*=o;c-=a;d-=b;e-=a;f-=b;i=i*m-g;j=j*o-h;k=k*m-g;l=l*o-h;o=1/(i*l-k*j);m=(l*c-j*e)*o;j=(l*d-j*f)*o;c=(i*e-k*c)*o;d=(i*f-k*d)*o;a=a-m*g-c*h;b=b-j*g-d*h;q.save();q.transform(m,j,c,d,a,b);q.clip();q.drawImage(n,0,0);q.restore()}function Ha(a,b,c,d){ja[0]=255*a.r|0;ja[1]=255*a.g|0;ja[2]=255*a.b|0;ja[4]=255*b.r|0;ja[5]=255*b.g|0;ja[6]=255*b.b|0;ja[8]=255*c.r|0;ja[9]=255*c.g|0;ja[10]=255*c.b|0;
ja[12]=255*d.r|0;ja[13]=255*d.g|0;ja[14]=255*d.b|0;Da.putImageData(Ja,0,0);Ga.drawImage(Ca,0,0);return Ea}function wa(a,b,c){a=(a-b)/(c-b);return a*a*(3-2*a)}function xa(a){a=0.5*(a+1);return 0>a?0:1<a?1:a}function ra(a,b){var c=b.x-a.x,d=b.y-a.y,e=c*c+d*d;0!==e&&(e=1/Math.sqrt(e),c*=e,d*=e,b.x+=c,b.y+=d,a.x-=c,a.y-=d)}if(!1===l instanceof THREE.Camera)console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");else{var sa,Ia,T,E;!0===this.autoClear?this.clear():q.setTransform(1,
0,0,-1,n,p);f.info.render.vertices=0;f.info.render.faces=0;g=j.projectScene(a,l,this.sortObjects,this.sortElements);i=g.elements;h=g.lights;Fa=0<h.length;if(!0===Fa){ca.setRGB(0,0,0);ua.setRGB(0,0,0);va.setRGB(0,0,0);sa=0;for(Ia=h.length;sa<Ia;sa++){E=h[sa];var U=E.color;E instanceof THREE.AmbientLight?(ca.r+=U.r,ca.g+=U.g,ca.b+=U.b):E instanceof THREE.DirectionalLight?(ua.r+=U.r,ua.g+=U.g,ua.b+=U.b):E instanceof THREE.PointLight&&(va.r+=U.r,va.g+=U.g,va.b+=U.b)}}sa=0;for(Ia=i.length;sa<Ia;sa++)if(T=
i[sa],E=T.material,!(void 0===E||!1===E.visible)){ba.empty();if(T instanceof THREE.RenderableParticle){x=T;x.x*=n;x.y*=p;var U=x,da=T;b(E.opacity);c(E.blending);var na=void 0,oa=void 0,ka=void 0,la=void 0,ya=T=void 0,Ka=void 0;E instanceof THREE.ParticleBasicMaterial?null===E.map?(ka=da.object.scale.x,la=da.object.scale.y,ka*=da.scale.x*n,la*=da.scale.y*p,ba.set(U.x-ka,U.y-la,U.x+ka,U.y+la),!1!==qa.intersects(ba)&&(e(E.color.getContextStyle()),q.save(),q.translate(U.x,U.y),q.rotate(-da.rotation),
q.scale(ka,la),q.fillRect(-1,-1,2,2),q.restore())):(T=E.map.image,ya=T.width>>1,Ka=T.height>>1,ka=da.scale.x*n,la=da.scale.y*p,na=ka*ya,oa=la*Ka,ba.set(U.x-na,U.y-oa,U.x+na,U.y+oa),!1!==qa.intersects(ba)&&(q.save(),q.translate(U.x,U.y),q.rotate(-da.rotation),q.scale(ka,-la),q.translate(-ya,-Ka),q.drawImage(T,0,0),q.restore())):E instanceof THREE.ParticleCanvasMaterial&&(na=da.scale.x*n,oa=da.scale.y*p,ba.set(U.x-na,U.y-oa,U.x+na,U.y+oa),!1!==qa.intersects(ba)&&(d(E.color.getContextStyle()),e(E.color.getContextStyle()),
q.save(),q.translate(U.x,U.y),q.rotate(-da.rotation),q.scale(na,oa),E.program(q),q.restore()))}else if(T instanceof THREE.RenderableLine){if(x=T.v1,z=T.v2,x.positionScreen.x*=n,x.positionScreen.y*=p,z.positionScreen.x*=n,z.positionScreen.y*=p,ba.addPoint(x.positionScreen.x,x.positionScreen.y),ba.addPoint(z.positionScreen.x,z.positionScreen.y),!0===qa.intersects(ba)&&(U=x,da=z,b(E.opacity),c(E.blending),q.beginPath(),q.moveTo(U.positionScreen.x,U.positionScreen.y),q.lineTo(da.positionScreen.x,da.positionScreen.y),
E instanceof THREE.LineBasicMaterial))U=E.linewidth,J!==U&&(J=q.lineWidth=U),U=E.linecap,t!==U&&(t=q.lineCap=U),U=E.linejoin,B!==U&&(B=q.lineJoin=U),d(E.color.getContextStyle()),q.stroke(),ba.inflate(2*E.linewidth)}else if(T instanceof THREE.RenderableFace3)x=T.v1,z=T.v2,D=T.v3,x.positionScreen.x*=n,x.positionScreen.y*=p,z.positionScreen.x*=n,z.positionScreen.y*=p,D.positionScreen.x*=n,D.positionScreen.y*=p,!0===E.overdraw&&(ra(x.positionScreen,z.positionScreen),ra(z.positionScreen,D.positionScreen),
ra(D.positionScreen,x.positionScreen)),ba.add3Points(x.positionScreen.x,x.positionScreen.y,z.positionScreen.x,z.positionScreen.y,D.positionScreen.x,D.positionScreen.y),!0===qa.intersects(ba)&&m(x,z,D,0,1,2,T,E,a);else if(T instanceof THREE.RenderableFace4&&(x=T.v1,z=T.v2,D=T.v3,W=T.v4,x.positionScreen.x*=n,x.positionScreen.y*=p,z.positionScreen.x*=n,z.positionScreen.y*=p,D.positionScreen.x*=n,D.positionScreen.y*=p,W.positionScreen.x*=n,W.positionScreen.y*=p,u.positionScreen.copy(z.positionScreen),
R.positionScreen.copy(W.positionScreen),!0===E.overdraw&&(ra(x.positionScreen,z.positionScreen),ra(z.positionScreen,W.positionScreen),ra(W.positionScreen,x.positionScreen),ra(D.positionScreen,u.positionScreen),ra(D.positionScreen,R.positionScreen)),ba.addPoint(x.positionScreen.x,x.positionScreen.y),ba.addPoint(z.positionScreen.x,z.positionScreen.y),ba.addPoint(D.positionScreen.x,D.positionScreen.y),ba.addPoint(W.positionScreen.x,W.positionScreen.y),!0===qa.intersects(ba)))(U=x,da=z,na=D,oa=W,ka=u,
la=R,ya=a,f.info.render.vertices+=4,f.info.render.faces++,b(E.opacity),c(E.blending),void 0!==E.map&&null!==E.map||void 0!==E.envMap&&null!==E.envMap)?(m(U,da,oa,0,1,3,T,E,ya),m(ka,na,la,1,2,3,T,E,ya)):(G=U.positionScreen.x,I=U.positionScreen.y,K=da.positionScreen.x,S=da.positionScreen.y,F=na.positionScreen.x,X=na.positionScreen.y,w=oa.positionScreen.x,ea=oa.positionScreen.y,P=ka.positionScreen.x,L=ka.positionScreen.y,Y=la.positionScreen.x,ma=la.positionScreen.y,E instanceof THREE.MeshLambertMaterial||
E instanceof THREE.MeshPhongMaterial)?(H.copy(E.color),M.copy(E.emissive),E.vertexColors===THREE.FaceColors&&(H.r*=T.color.r,H.g*=T.color.g,H.b*=T.color.b),!0===Fa)?!1===E.wireframe&&E.shading==THREE.SmoothShading&&4==T.vertexNormalsLength?(N.r=O.r=A.r=V.r=ca.r,N.g=O.g=A.g=V.g=ca.g,N.b=O.b=A.b=V.b=ca.b,k(T.v1.positionWorld,T.vertexNormalsWorld[0],N),k(T.v2.positionWorld,T.vertexNormalsWorld[1],O),k(T.v4.positionWorld,T.vertexNormalsWorld[3],A),k(T.v3.positionWorld,T.vertexNormalsWorld[2],V),N.r=N.r*
H.r+M.r,N.g=N.g*H.g+M.g,N.b=N.b*H.b+M.b,O.r=O.r*H.r+M.r,O.g=O.g*H.g+M.g,O.b=O.b*H.b+M.b,A.r=A.r*H.r+M.r,A.g=A.g*H.g+M.g,A.b=A.b*H.b+M.b,V.r=V.r*H.r+M.r,V.g=V.g*H.g+M.g,V.b=V.b*H.b+M.b,Z=Ha(N,O,A,V),o(G,I,K,S,w,ea),Q(G,I,K,S,w,ea,0,0,1,0,0,1,Z),o(P,L,F,X,Y,ma),Q(P,L,F,X,Y,ma,1,0,1,1,0,1,Z)):(y.r=ca.r,y.g=ca.g,y.b=ca.b,k(T.centroidWorld,T.normalWorld,y),y.r=y.r*H.r+M.r,y.g=y.g*H.g+M.g,y.b=y.b*H.b+M.b,r(G,I,K,S,F,X,w,ea),!0===E.wireframe?s(y,E.wireframeLinewidth,E.wireframeLinecap,E.wireframeLinejoin):
v(y)):(y.r=H.r+M.r,y.g=H.g+M.g,y.b=H.b+M.b,r(G,I,K,S,F,X,w,ea),!0===E.wireframe?s(y,E.wireframeLinewidth,E.wireframeLinecap,E.wireframeLinejoin):v(y)):E instanceof THREE.MeshBasicMaterial?(y.copy(E.color),E.vertexColors===THREE.FaceColors&&(y.r*=T.color.r,y.g*=T.color.g,y.b*=T.color.b),r(G,I,K,S,F,X,w,ea),!0===E.wireframe?s(y,E.wireframeLinewidth,E.wireframeLinecap,E.wireframeLinejoin):v(y)):E instanceof THREE.MeshNormalMaterial?(y.r=xa(T.normalWorld.x),y.g=xa(T.normalWorld.y),y.b=xa(T.normalWorld.z),
r(G,I,K,S,F,X,w,ea),!0===E.wireframe?s(y,E.wireframeLinewidth,E.wireframeLinecap,E.wireframeLinejoin):v(y)):E instanceof THREE.MeshDepthMaterial&&(fa=l.near,ga=l.far,N.r=N.g=N.b=1-wa(U.positionScreen.z,fa,ga),O.r=O.g=O.b=1-wa(da.positionScreen.z,fa,ga),A.r=A.g=A.b=1-wa(oa.positionScreen.z,fa,ga),V.r=V.g=V.b=1-wa(na.positionScreen.z,fa,ga),Z=Ha(N,O,A,V),o(G,I,K,S,w,ea),Q(G,I,K,S,w,ea,0,0,1,0,0,1,Z),o(P,L,F,X,Y,ma),Q(P,L,F,X,Y,ma,1,0,1,1,0,1,Z));ha.addRectangle(ba)}q.setTransform(1,0,0,1,0,0)}}};
THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3;this.positionScreen=new THREE.Vector4;this.visible=!0};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};
THREE.RenderableFace3=function(){this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.centroidWorld=new THREE.Vector3;this.centroidScreen=new THREE.Vector3;this.normalWorld=new THREE.Vector3;this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsLength=0;this.material=this.color=null;this.uvs=[[]];this.z=null};
THREE.RenderableFace4=function(){this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.v3=new THREE.RenderableVertex;this.v4=new THREE.RenderableVertex;this.centroidWorld=new THREE.Vector3;this.centroidScreen=new THREE.Vector3;this.normalWorld=new THREE.Vector3;this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];this.vertexNormalsLength=0;this.material=this.color=null;this.uvs=[[]];this.z=null};
THREE.RenderableObject=function(){this.z=this.object=null};THREE.RenderableParticle=function(){this.rotation=this.z=this.y=this.x=this.object=null;this.scale=new THREE.Vector2;this.material=null};THREE.RenderableLine=function(){this.z=null;this.v1=new THREE.RenderableVertex;this.v2=new THREE.RenderableVertex;this.material=null};
